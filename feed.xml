<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.4">Jekyll</generator><link href="https://cardinalneal.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://cardinalneal.github.io/" rel="alternate" type="text/html" hreflang="en"/><updated>2025-03-14T01:53:16+00:00</updated><id>https://cardinalneal.github.io/feed.xml</id><title type="html">Neal’s Life Gallery</title><subtitle>Neal&apos;s recent outputs and reading notes </subtitle><entry><title type="html">大模型的“幻觉”：是创意的火花还是认知的陷阱？</title><link href="https://cardinalneal.github.io/blog/2025/Hallucinations/" rel="alternate" type="text/html" title="大模型的“幻觉”：是创意的火花还是认知的陷阱？"/><published>2025-03-12T21:30:13+00:00</published><updated>2025-03-12T21:30:13+00:00</updated><id>https://cardinalneal.github.io/blog/2025/Hallucinations</id><content type="html" xml:base="https://cardinalneal.github.io/blog/2025/Hallucinations/"><![CDATA[<blockquote> <p>幻觉通常是指模型生成不真实、虚构、不一致或无意义的内容。但这个现象也可以用另一个名称来理解 —— “温度”（temperature）。</p> </blockquote> <h2 id="幻觉的类型"><strong>幻觉的类型</strong></h2> <ol> <li> <p><strong>上下文幻觉</strong> (In-context Hallucination)</p> <p>指模型生成的输出与当前对话上下文（用户提供的输入或历史信息）存在直接矛盾或不一致。</p> </li> <li> <p><strong>外部幻觉</strong> (Extrinsic Hallucination)</p> <p>指模型生成的内容违背预训练数据中的世界知识或客观事实</p> </li> </ol> <p>为了避免幻觉，大模型需要做到以下两点：</p> <ol> <li>实事求是，不编造不存在的信息。</li> <li>在适当的时候承认自己不知道答案。</li> </ol> <h2 id="why-cause-hallucinations">Why cause <strong>Hallucinations</strong></h2> <p>大模型的基本原理是基于上下文的预测，也就是在给定前文的情况下通过概率模型预测下文。预测的准确性取决于大模型在训练时如何处理和消化这些信息。大模型不是数据库，它压缩消化的是知识体系，包括常识或百科知识，但天然排除缺乏信息冗余度的长尾事实及细节。 从统计上来看，“长尾”事实与噪音无异。只有冗余信息和常识性内容最终嵌入模型参数中。当模型需要预测下一个词时，如果此处需要模型没有“记住”的长尾事实，它只能“编造”细节继续生成，这就是幻觉的来源。</p> <h3 id="预训练数据问题-pre-training-data-issues"><strong>预训练数据问题 Pre-training Data Issues</strong></h3> <p>大模型通过网络内容进行训练，而这些网络内容本身往往包含错误信息。人类在传播信息时会带有偏差，这些错误信息会被纳入训练集，进而影响模型输出</p> <h3 id="微调阶段引入新知识-fine-tuning-new-knowledge">微调阶段引入新知识 Fine-tuning New Knowledge</h3> <p>在微调阶段引入新知识是不可避免的。但是由于Fine-tune的计算量相对较小，所以会出现以下问题：</p> <ol> <li>模型学习新知识示例是慢于具有与模型先前知识一致的知识的其他示例</li> <li>一旦最终学习了具有新知识的示例，它们就会增加模型产生幻觉的倾向</li> </ol> <h3 id="模型自身特点"><strong>模型自身特点</strong></h3> <p>大语言模型的灵感来源于我们的脑神经。那么请问，人脑一般情况下最记不住什么？答案是具体实体（如人名、地名、书名、标题、时间、地点等）。所以大模型的本质是试图从大量数据中找出各种规律，而不是记录所有细节。 但人类记不住事实的时候，通常会说自己忘了或者添加“好像、可能”等不确定的语气（习惯性说谎者除外）。而现在的语言大模型与此不同，它“记不住”事实的时候，就会编造读起来似乎最顺畅的细节。</p> <h2 id="如何对抗幻觉">如何对抗幻觉</h2> <aside> 这些方法的核心思想是： 1. **让模型自己验证和修正**，减少错误。 2. **引入外部知识**，确保内容的准确性。 3. **调整模型的行为**，让它更关注事实。 </aside> <h3 id="1-rag-知识检索增强">1. RAG （知识检索增强）</h3> <p>RAG是一种结合检索（Retrieval）和生成（Generation）的方法，旨在通过引入外部知识来增强大语言模型的准确性和可靠性。其核心思想是：在生成答案之前，先从外部知识库中检索与问题相关的文档，然后将这些文档作为额外的上下文信息提供给模型，帮助其生成更准确、更可靠的回答。</p> <p><strong>RAG的工作原理</strong></p> <ol> <li><strong>检索阶段（Retrieval Phase）</strong> <ul> <li><strong>问题理解</strong>：当用户提出一个问题时，模型首先需要理解问题的核心内容和关键词。</li> <li><strong>文档检索</strong>：模型会从一个预先构建的外部知识库（如维基百科、新闻文章、专业数据库等）中检索与问题最相关的文档片段。检索过程通常使用向量相似度计算（如BERT Embeddings）来找到与问题最匹配的文档。</li> <li><strong>文档筛选</strong>：检索到的文档可能包含大量信息，模型会进一步筛选出最相关、最有用的部分，作为后续生成的上下文。</li> </ul> </li> <li><strong>生成阶段（Generation Phase）</strong> <ul> <li><strong>上下文融合</strong>：将检索到的文档片段与用户的问题结合，形成一个增强的上下文。这个上下文包含了问题的背景信息和相关知识，帮助模型更好地理解问题。</li> <li><strong>答案生成</strong>：模型基于增强的上下文生成答案。由于引入了外部知识，生成的答案更有可能是准确的、基于事实的，而不是模型自身的“幻觉”。</li> <li><strong>优化与调整</strong>：生成的答案可能会经过进一步的优化和调整，以确保其连贯性和准确性。</li> </ul> </li> </ol> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/Hall_RAG-480.webp 480w,/assets/img/Hall_RAG-800.webp 800w,/assets/img/Hall_RAG-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/Hall_RAG.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <h3 id="2-行动链---验证链">2. 行动链 - 验证链</h3> <p>验证链（CoVe）包含核心四个步骤：</p> <ol> <li> <p><strong>Baseline Response</strong></p> <p>模型生成一个初始结果，称之为 “Baseline”</p> </li> <li> <p><strong>Plan Verification</strong></p> <p>基于Baseline，模型设计非模版化的验证问题用于事实核查。比如，如果模型说“太阳从西边升起”，它可能会设计一个问题：“太阳是从哪个方向升起的？”</p> </li> <li> <p><strong>Execute Verification</strong></p> <p>模型独立回答这些问题。这里有几种不同的方式：</p> <ul> <li><strong>联合验证</strong>：验证问题和回答一起进行，但这样可能会导致模型重复之前的错误。</li> <li><strong>两步验证</strong>：把验证问题的设计和回答分开，避免初始回答影响验证结果。</li> <li><strong>分解验证</strong>：每个验证问题单独回答，避免长回答中的错误相互影响。</li> <li><strong>分解+修订</strong>：在分解验证的基础上，增加一个“交叉检查”步骤，确保回答和验证结果一致。</li> </ul> </li> <li> <p><strong>Final output</strong></p> <p>如果发现不一致，模型会修正回答，生成最终的正确回答。</p> </li> </ol> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/Hall_CoVe-480.webp 480w,/assets/img/Hall_CoVe-800.webp 800w,/assets/img/Hall_CoVe-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/Hall_CoVe.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <h3 id="3-fine-tuning-for-factuality针对事实性的微调"><strong>3. Fine-tuning for Factuality（针对事实性的微调）</strong></h3> <p>通过微调模型，让它更擅长生成准确的内容。具体方法：</p> <ul> <li> <p><strong>主题前缀（TopicPrefix）</strong></p> <p>在训练时，给每个句子加上主题（如维基百科标题），帮助模型更好地理解事实。</p> </li> <li> <p><strong>句子补全损失（Sentence Completion Loss）</strong></p> <p>训练时更关注句子的后半部分，因为后半部分通常包含更多事实性信息。</p> </li> </ul> <h3 id="4-sampling-methods"><strong>4. Sampling Methods</strong></h3> <p>在生成文本时，模型会从多个可能的词中选择。不同的采样方法会影响生成内容的准确性：</p> <ul> <li> <p><strong>核采样（Nucleus Sampling）</strong></p> <p>这种方法会增加随机性，虽然能生成更多样化的内容，但可能导致更多错误。</p> </li> <li> <p><strong>事实核采样（Factual-Nucleus Sampling）</strong></p> <p>改进版的核采样，动态调整随机性，减少句子后半部分的错误。</p> </li> </ul> <p><strong>通俗理解</strong>：就像写句子时，前半部分尽量准确，后半部分稍微灵活一些，但不要瞎编。</p> <h2 id="幻觉的双面性创造与谎言"><strong>幻觉的双面性：创造与谎言</strong></h2> <p>大模型的幻觉现象是一个复杂而多面的存在，不能简单地用“好”或“坏”来一概而论。在某些场景下，幻觉可能是一种误导性的“谎言”，而在另一些场景中，它却可能成为激发创造力和想象力的源泉。这种双面性使得我们对大模型的使用必须更加审慎和有选择性。</p> <p><strong>幻觉作为“谎言”：误导与风险</strong></p> <p>在事实性问题、新闻信息传播以及专业领域中，幻觉往往是一种需要极力避免的现象。例如，当模型在回答关于科学原理、历史事件或法律条款的问题时，生成与事实不符的内容，这不仅会误导用户，还可能引发严重的后果。在新闻报道中，幻觉可能导致虚假信息的传播，从而破坏社会信任；在医疗、法律等专业领域，错误的建议甚至可能危及生命或导致法律纠纷。</p> <p>随着生成技术的不断发展，模型生成内容的成本越来越低，但人工检查和验证的成本却依然高昂。这意味着在关键领域，我们仍然需要依赖专业人士的校正和审核。因此，我们不能对模型的输出过度信任，尤其是在涉及重大决策和专业知识的场景中。</p> <p><strong>幻觉作为“创造”：激发想象力与创造力</strong></p> <p>然而，幻觉并非总是负面的。在文学创作、艺术设计和娱乐游戏等领域，幻觉可能成为一种独特的工具，激发人类的想象力和创造力。大模型能够生成虚构的故事、独特的艺术风格或新颖的游戏情节，这些内容虽然并非基于现实，但却能为创作者提供灵感，推动艺术和文化的创新。</p> <p>这种“创造性幻觉”与人类智慧中的一种关键能力——虚构能力——有着相似之处。正如尤瓦尔·赫拉利在《人类简史》中所指出的，人类文明的发展正是依赖于“讲故事”的能力。我们通过虚构神话、宗教、理想和情怀，组织起庞大的群体合作，从而战胜其他动物，成为地球的主宰。从这个意义上说，幻觉也可以被视为一种人类创造力的延伸。</p> <p><strong>专家角色的演变与挑战</strong></p> <p>尽管大模型在某些领域降低了知识获取的门槛，但这也带来了新的挑战。它实际上<strong>提高了真正成为专家的门槛，加剧了普通人之间的竞争</strong>，同时使得真正的专业知识竞争相对减弱。这种现象可能导致那些具有表面知识而缺乏深入理解的人在某些领域获得更多影响力和话语权。</p> <p>许多人因此认为<strong>专家的作用在大模型出现后变得不再重要</strong>，但这种观点潜藏着巨大的危险。随着技术的发展，专家的权威虽然在逐步下降，但他们在验证事实、提供深度分析和指导决策方面仍然不可或缺。专家的存在不仅是知识的守护者，更是社会信任和进步的重要保障。</p> <h2 id="related-article">Related Article</h2> <ol> <li>https://lilianweng.github.io/posts/2024-07-07-hallucination/</li> <li>https://mp.weixin.qq.com/s/zsK0XmDIZOsmBXLHnYJZrQ</li> </ol>]]></content><author><name></name></author><category term="Tech"/><category term="LLM"/><summary type="html"><![CDATA[Deep Tech-analysis for DeepSeek New Model V3 & R1]]></summary></entry><entry><title type="html">Deepseek V3 &amp;amp; R1 论文解读笔记 技术版</title><link href="https://cardinalneal.github.io/blog/2025/DSV3R1/" rel="alternate" type="text/html" title="Deepseek V3 &amp;amp; R1 论文解读笔记 技术版"/><published>2025-03-01T20:30:13+00:00</published><updated>2025-03-01T20:30:13+00:00</updated><id>https://cardinalneal.github.io/blog/2025/DSV3R1</id><content type="html" xml:base="https://cardinalneal.github.io/blog/2025/DSV3R1/"><![CDATA[<h2 id="前言">前言</h2> <p>大语言模型中 在实用方面 分为两种模型，</p> <p>一种是 通用模型，一种是 推理模型 推理模型是在通用模型基础上进行 加强（核心技术），</p> <p>推理模型的核心技术： 强化学习，RL； 推理规模（inference scaling）</p> <h3 id="通用模型">通用模型</h3> <p>实例：GPT-4</p> <p>运行原理：预测下一个词（概率预测）</p> <p>特点：快速</p> <p>比较依赖提示词补偿，进行显式引导</p> <p>优势领域：创意</p> <p>缺陷：幻觉，也就是瞎说</p> <h3 id="推理模型">推理模型</h3> <p>实例：GPT-o3</p> <p>运行原理：会对你内容进行思考，也就是CoT</p> <p>优势：逻辑密度高</p> <p>优势领域：逻辑推理</p> <p>缺点：不要使用”启发式“（cosplay）提示词</p> <hr/> <h1 id="deepseek-v3">DeepSeek V3</h1> <h2 id="核心特点">核心特点</h2> <p><code class="language-plaintext highlighter-rouge">DeepSeek-V3</code></p> <ul> <li><strong>架构</strong>：MoE（Mixture of Experts），总参数量 671B，每次激活 37B。</li> <li><strong>关键技术</strong>： <ul> <li><strong>Multi-head Latent Attention (MLA)</strong>：减少推理计算资源。</li> <li><strong>DeepSeekMoE</strong>：优化训练和推理成本。</li> <li><strong>FP8 混合精度</strong>：取代 FP32，提升效率。</li> <li><strong>训练策略</strong>：Multi-token prediction + auxiliary-loss-free。</li> <li><strong>预训练</strong>：稳定，没有 loss spike &amp; roll back</li> </ul> </li> </ul> <p><strong>MoE 与 Dense 模型区别</strong></p> <ul> <li><strong>MoE</strong>：推理时只激活一部分相关参数。</li> <li><strong>Dense</strong>：推理时激活所有参数。</li> </ul> <h2 id="architecture">Architecture</h2> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/DSV3R1_1-480.webp 480w,/assets/img/DSV3R1_1-800.webp 800w,/assets/img/DSV3R1_1-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/DSV3R1_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <h3 id="multi-head-latent-attentionmla">Multi-head Latent Attention(MLA)</h3> <aside> 💫 - 作用：在 inference 的时候 使得计算资源进一步减少 - 基于：Attention &amp; KV cache 上面的改进 </aside> <p>Attention 本质上是计算 token 之间的 correlation</p> <p>由于 大部分大语言模型 都采用decoder 架构，所以 autoregressive 所以就是token by token, 相当于 运行decoder N 遍，KV cache 就是一个拿空间换时间的方法。</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/DSV3R1_2-480.webp 480w,/assets/img/DSV3R1_2-800.webp 800w,/assets/img/DSV3R1_2-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/DSV3R1_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <p>MLA 的基本思想</p> <ol> <li>用一个低维度的 C 去代替 原本的 K &amp; V， 通过 C 去搭配 W_k &amp; W_v 去还原 原本的K &amp; V</li> <li>但是这个会让 RoPE 失效</li> </ol> <p>Decoupled Rotary Position Embedding (RoPE) - 一种 Position Embedding， 介于 absolute position embedding &amp; relative position embedding 之间，</p> <p>但这里就会让 KV cache 失效， 所以 在 采用 architecture 中最上面图片 的右下 Attention 结构</p> <h3 id="deepseekmoe-architectures">DeepSeekMoE architectures</h3> <aside> ➡️ 是整体架构，主要针对的是training &amp; inference 的 cost 优化，具体改动： 1. 增加 **Expert** 数量，减少单个 Expert 的参数量，从而保持总参数量相近。 2. 将部分 Expert 变为通用 Expert（即通才），提升模型的泛化能力。 3. 在 **sigmoid** 前增加 **bias term**，用于调节负载（仅在训练时使用）。 </aside> <p><strong>MoE 架构</strong></p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/DSV3R1_3-480.webp 480w,/assets/img/DSV3R1_3-800.webp 800w,/assets/img/DSV3R1_3-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/DSV3R1_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <p>MoE 架构：</p> <ul> <li><strong>Dense MoE</strong>：所有 FFN（Feed-Forward Network）按比例加权平均。</li> <li><strong>Sparse MoE</strong>：选择 Top K 的 Expert 进行加权平均，通常选择 Sparse MoE 以减少成本。</li> </ul> <p><strong>问题</strong>：在不同的Expert 中间 区分度不是特别大，且有可能会有重合冗余的</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/DSV3R1_4-480.webp 480w,/assets/img/DSV3R1_4-800.webp 800w,/assets/img/DSV3R1_4-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/DSV3R1_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <p>基于上述问题，DeepSeekMoE 架构</p> <p><strong>结构改进</strong>:</p> <ul> <li>专家数量倍增（2N个微专家）</li> <li>设置共享专家（Common Experts）</li> <li>用 数量 交换 质量，Various 变小了，就不会太容易过拟合</li> </ul> <h3 id="auxiliary-loss-free">Auxiliary-loss-free</h3> <aside> 💫 **问题**：MoE 模型 在training中非常可能出现负载不平衡 (**Load Balance**) **解决方法：**通常 是使用 **Loss Control**, 但作者选择使用 **Loss Free** </aside> <p>MoE 模型在训练过程中可能出现 <strong>负载不平衡</strong> 问题，即某些 Expert 被过度使用，导致富的更富，穷的更穷。传统方法通过增加额外的 Loss Control 来平衡负载，但这种<strong>Loss 可能是错误</strong>的！</p> <p>DeepSeek 采用 <strong>loss free</strong> 的方法</p> \[g'_{i,t} =\begin{cases}s_{i,t} + b_i &amp; \text{if } s_{i,t} + b_i \in \text{Top}_k\left( \{ s_{j,t} + b_j \mid 1 \leq j \leq N_r \}, K_r \right), \\0 &amp; \text{otherwise.}\end{cases}\] <p>通过在 softmax 前增加 <strong>bias term</strong> 来手动调节负载（token越多，则 b 越小，从而输出的softmax 越小。），从而在不影响损失的情况下实现负载平衡。</p> <h3 id="multi-token-prediction">Multi-token prediction</h3> <aside> ➡️ 增强模型推理性能 &amp; 增加训练效率 </aside> <p><strong>LLM Training</strong></p> <ul> <li><strong>短视</strong>：模型训练时通常会依赖较短期的目标（即单个token的预测），缺乏对长时间步的全局视野。</li> </ul> <p><strong>LLM Inference</strong></p> <ul> <li><strong>自回归模型</strong>：LLM的推理是<strong>token by token</strong>的逐步生成，每生成一个token就进行一次预测，并以此为基础继续生成下一个token。</li> <li><strong>缺乏Ground Truth</strong>：在推理阶段，模型没有像训练阶段那样有ground truth去进行校正。</li> <li><strong>慢</strong>：推理过程由于是逐步生成，因此速度较慢，尤其是当生成长文本时，推理效率低下。</li> </ul> <p><strong>思路</strong>： 通过在 Inference 过程中采用 <strong>Speculative Decoding（猜测性解码）</strong>，可以提高生成的速度并减少逐token生成的时间开销。即 增加一个小模型，去快速预测一个token 然后由大模型进行验证</p> <p><strong>必要条件</strong></p> <ol> <li><strong>Quick Guess (快速猜测)</strong>： <ul> <li>需要在推理过程中进行快速的初步猜测，从而减少推理时间。</li> </ul> </li> <li><strong>Cheap Verification (廉价验证)</strong>： <ul> <li>对每个猜测结果进行快速且低成本的验证，确保最终的预测结果准确。</li> </ul> </li> </ol> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/DSV3R1_5-480.webp 480w,/assets/img/DSV3R1_5-800.webp 800w,/assets/img/DSV3R1_5-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/DSV3R1_5.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <p>DeepSeek 采用了 把 Causal Chain 从 推理阶段 放进了 训练阶段，在训练过程中 增强了模型的远视能力，在推理过程中 则 直接拿掉</p> <h1 id="deepseek-r1">Deepseek R1</h1> <aside> 在理解了基础模型与推理模型的区别后，我们将深入解析 R1 这一推理模型。R1 的论文标题为《Incentivizing Reasoning Capability》，其核心思想是通过激励机制增强模型的推理能力。相较于 V3，R1 的设计思路更为直观。 </aside> <h2 id="背景">背景</h2> <h3 id="1-rl">1 RL</h3> <p><strong>强化学习（RL）</strong> 是一种对泛化能力有显著帮助的学习范式，相当于一种通过激励机制（奖励和惩罚）来优化模型行为的学习范式。模型在回答正确时获得奖励，从而被鼓励自主探索。在 R1 的训练过程中，激励机制主要关注模型是否进行思考以及结果的正确性。</p> <ul> <li>reward <ul> <li>是 稀疏的</li> <li>如何去 define 一个好的reward</li> </ul> </li> <li>dynamic interact with environment</li> <li>explore v.s. exploit</li> </ul> <h3 id="2-agi">2 AGI</h3> <p><strong>通往 AGI 的道路</strong>：推理模型的出现源于对通用人工智能（AGI）的追求。AGI 的核心在于模型的泛化能力，而非简单的死记硬背。因此，模型需要具备自主思考和推理的能力。</p> <h3 id="3-llm-training">3 LLM Training</h3> <ol> <li> <p>训练范式</p> <p>原先openai 范式：</p> <ol> <li>Pre-train : 在这个 过程中，数据质量很关键。</li> <li>Post-train <ol> <li>SFT：这个过程中，数据质量也很关键</li> <li>human preference → reward model</li> <li>reward model → RL (PPO)</li> </ol> </li> </ol> <p>R1 的纯RL 是只有rule-based + final reward，也就是像 code &amp; math</p> </li> </ol> <ul> <li>要训练 LLM 通过 RL 做题，要有 精准的 Reward</li> <li>不要采用结构化的方法，最终限制了模型的效果，要让模型 探索思考方式</li> <li>思考过程中包含了搜索过程，允许犯错 <ol> <li>scaling law</li> </ol> <p>General = scale up + less structure model</p> <p>但是 scale 也不能无限大，会遇到各种各样的问题，<code class="language-plaintext highlighter-rouge"> 系统问题 </code> 尤其突出，e.g. loss spike (loss突然增大) ；其次就是越来越容易听不懂人话</p> </li> </ul> <ol> <li> <p>emergent ability 涌现</p> <p>就是指 大模型参数超过一定的阈值之后，大模型的性能 会突然从量变到质变。</p> <p>在 R1 这篇文章中也得到了证实。 R1的这套方法在小模型上面没有效果</p> </li> </ol> <h2 id="architecture-1">Architecture</h2> <h3 id="复现-deepseek-r1-的aha-moment"><strong>复现 DeepSeek R1 的「Aha Moment」</strong></h3> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                                                              ***“左脚踩右脚”***
</code></pre></div></div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/DSV3R1_5-480.webp 480w,/assets/img/DSV3R1_5-800.webp 800w,/assets/img/DSV3R1_5-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/DSV3R1_5.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <ol> <li><strong>基础模型</strong>：<code class="language-plaintext highlighter-rouge">DeepSeek V3</code>（MoE 模型）。</li> <li><strong>纯 RL 训练</strong>：通过纯 RL（数学和代码）训练生成 <code class="language-plaintext highlighter-rouge">DS-R1-Zero</code> 模型。 <ul> <li>优点：极强的推理能力。</li> <li>缺点：可读性差，语言混乱。</li> <li>生成 <strong>SFT(CoT) data1</strong> 作为冷启动数据。</li> </ul> </li> <li><strong>冷启动 + RL 训练</strong>：<code class="language-plaintext highlighter-rouge">DeepSeek V3</code> 使用 <strong>data1</strong> 进行冷启动，再进行 纯RL训练，得到<code class="language-plaintext highlighter-rouge">R1-checkp1</code> 然后经过一致性 RL 训练生成 <code class="language-plaintext highlighter-rouge">R1-checkp2</code> 。 <ul> <li>一致性指的是语言的一致性，<code class="language-plaintext highlighter-rouge">R1-checkp2</code> 解决了语言混杂问题。</li> <li><code class="language-plaintext highlighter-rouge">R1-checkp2</code> 生成更高质量的 <strong>SFT(CoT) data2</strong></li> </ul> </li> <li><strong>基模型优化</strong>：<code class="language-plaintext highlighter-rouge">DeepSeek V3</code> 通过 <strong>SFT(CoT) data2</strong> 训练生成 新的 <code class="language-plaintext highlighter-rouge">DeepSeek V3</code> <ul> <li>生成 通用知识 <strong>SFT(Knowledge) data3</strong></li> </ul> </li> <li><strong>最终模型</strong>：<code class="language-plaintext highlighter-rouge">DeepSeek V3</code> 使用 <strong>data 2</strong> + <strong>data3</strong> 进行冷启动，结合 RL 和人类偏好训练，生成 <code class="language-plaintext highlighter-rouge">DeepSeek R1</code>。</li> </ol> <h3 id="gpro">GPRO</h3> <h2 id="r1-的破圈行业影响与未来展望">R1 的破圈：<strong>行业影响与未来展望</strong></h2> <p><strong>R1 突破的基础是真正的实力。</strong>性能确实非常强大，懂的都懂。当然，DeepSeek 做到的还不止这些，他还做了很多尝试，也分享了全球的AI行业</p> <p>R1 的成功不仅在于其强大的性能，更在于它解决了行业面临的难题，并为学术界指明了发展方向。如果你是研究人员或者大模型公司，你会觉得这东西想我所想，急我所急。</p> <p>DeepSeek 的贡献不仅限于 R1，还包括以下几点：</p> <ol> <li><strong>蒸馏实验</strong>：通过蒸馏实验证明了高质量 reasoning CoT 能够激发现有模型的能力。这一发现为现有模型的优化提供了新的思路。</li> <li><strong>创新范式</strong>：R1 证明了「左脚踩右脚」的可行性，为未来几个月到半年内的 RL 领域突破奠定了基础。</li> <li><strong>AI Infra 的崛起</strong>：全球 AI 基础设施终于找到了值得部署的模型，推动了 AI Infra 的发展。如果 OpenAI 开源，全球 AI Infra 的格局将大不相同。</li> <li><strong>可控推理时间扩展</strong>：虽然 R1 尝试了 RL，但尚未进行可控的 inference time scaling。这一方向的探索有望进一步提升模型性能。</li> <li><strong>long2short 推理</strong>：这一概念非常有趣，推理过程不应被视为模型的旁路思考，而是 Next Token Prediction 的一部分。未来，推理过程将更加高效，能够快速聚焦于关键问题。</li> </ol> <p>新的尝试</p> <ul> <li><strong>基模型的重要性</strong>：即使是通过“左脚踩右脚”的方式提升模型，基模型的质量仍然至关重要。</li> </ul> <h1 id="relative-article">Relative Article</h1> <p><a href="https://mp.weixin.qq.com/s/8ifsQ1eRJpOSHCrFAtAX0A"><strong>万字赏析 DeepSeek 创造之美：DeepSeek R1 是怎样炼成的？</strong></a></p> <p><a href="/assets/pdf/DeepSeekR1_Analysis_Tenction.pdf">万字赏析 DeepSeek 创造之美：DeepSeek R1 是怎样炼成的？丨荐读.pdf</a></p> <p><a href="https://www.youtube.com/watch?v=axlQI7fGn_8&amp;t=0s">https://www.youtube.com/watch?v=axlQI7fGn_8&amp;t=0s</a></p>]]></content><author><name></name></author><category term="Tech"/><category term="LLM"/><summary type="html"><![CDATA[Deep Tech-analysis for DeepSeek New Model V3 & R1]]></summary></entry><entry><title type="html">2024年我的成长清单📝｜2025我要这样布局🔥</title><link href="https://cardinalneal.github.io/blog/2025/24review-25plan/" rel="alternate" type="text/html" title="2024年我的成长清单📝｜2025我要这样布局🔥"/><published>2025-01-28T21:30:13+00:00</published><updated>2025-01-28T21:30:13+00:00</updated><id>https://cardinalneal.github.io/blog/2025/24review-25plan</id><content type="html" xml:base="https://cardinalneal.github.io/blog/2025/24review-25plan/"><![CDATA[<h1 id="2024年度总结"><strong>🌟</strong>2024，年度总结</h1> <blockquote> <p>2024年，我的第二个本命年，不仅是挑战，更是转折。从学生身份正式步入社会，我就像离开“新手村”般踏上了社会这张巨大的牌桌。这一年，我经历了重要时刻、完成了深刻改变，也收获了许多认知，留下一段值得铭记的旅程。</p> </blockquote> <p><strong>关键词</strong>：<strong>汲取</strong></p> <hr/> <h2 id="-2024地球探索"><strong>🌍 2024·地球探索</strong></h2> <p>2024 解锁了12个新地方！</p> <p>🏁 多伦多，尼日加拉大瀑布</p> <p>🏁 坦帕，奥兰多</p> <p>🏁 西雅图、旧金山</p> <p>🏁 胡志明、印尼</p> <p>🏁 伊斯坦布尔、迪拜、塞内加尔、坦桑尼亚</p> <h2 id="2024highlight时刻"><strong>🎯 2024·Highlight时刻</strong></h2> <p>这一年有很多值得纪念的瞬间，记录了几个里程碑：</p> <ul> <li><strong>01月01日</strong>：完成从美国匹兹堡到加拿大多伦多的自驾之旅，解锁了一段跨国公路旅行❄️</li> <li><strong>05月10日</strong>：从卡内基梅隆大学毕业，正式告别学生时代🎓</li> <li><strong>06月05日</strong>：带着我的小猫”雪球”，经历13小时长途飞行，回到上海🐱</li> <li><strong>08月05日</strong>：入职新工作，从学生党变身职场人💼</li> <li><strong>10月05日</strong>：在宁波认识了一群志同道合的高质量伙伴</li> <li><strong>11月08日</strong>：慢慢开始听播客</li> <li><strong>12月05日</strong>：独自去非洲考察市场，勇敢迈出舒适区🌟</li> </ul> <p>每一个瞬间都让我觉得：<strong>人生真的充满可能性！</strong></p> <h2 id="-2024我做出的改变"><strong>🌱 2024·我做出的改变</strong></h2> <p>✅ 开启养生之路：</p> <ol> <li>多喝水，标准作息在11点睡觉</li> <li>开始学着打八段锦</li> <li>冬天开始多次泡脚</li> </ol> <p>✅ 接触玄学：</p> <ol> <li>八字，年运，风水</li> </ol> <p>✅ 人生信仰：</p> <ol> <li>收集spark，完善 Bible</li> </ol> <p>✅ 重新定义人生优先级</p> <ol> <li>健康放在首位</li> <li>工作是核心</li> <li>感情保持简单：感情在时间的占比会被我无限缩放，但依旧必不可少</li> </ol> <p>✅ 个人知识库</p> <ol> <li>开始听播客：扩充知识面，强推 <strong>《纵横四海》</strong>和《<strong>一把卷尺</strong>》全是高知识密度的播客</li> <li>记录时间：定时复盘对自己的时间分配有清晰的认知</li> <li>结合Notion 开始搭建自己的个人知识库</li> <li>微信小妙招 <ol> <li>用收藏置顶做待办</li> <li>建群分类管理项目：来不及看的同一分类文章和资讯，放在一个群里方便后续打开。</li> </ol> </li> </ol> <h2 id="认知分享"><strong>💡认知分享</strong></h2> <ol> <li><strong>刻意练习</strong>：当你觉得困难时，往往说明你正在正确的路上。</li> <li><strong>长期主义</strong>：坚持长期思维，始终留在“牌桌”上。</li> <li><strong>安全边际</strong>：要时刻给自己留出安全空间</li> <li><strong>容错率</strong>：当然，人还是有很高的容错的，在有些时候请大胆尝试</li> <li><strong>世界的本质是混乱</strong>：美好事物不是因为你值得，而是与破坏和失去一样，是世界混乱的一部分</li> <li><strong>形象与实力</strong>：形象是实力的前沿阵地，“先敬皮囊，后敬灵魂”</li> <li><strong>万事皆有代价</strong>：Everything has a price, 但不一定都标出来。免费的可能才是最贵的</li> <li><strong>积极错觉</strong>：你要成功,是一定要有且坚持自己的信仰, 可能会走偏，伤害别人，但想要成功 是一定必须经历血雨的</li> <li><strong>感情的经营之道</strong>：爱情需要转化为亲密关系，并用小波澜为生活增色</li> <li> <p><strong>人际关系</strong>：当别人需要评估你的实力的时候：</p> <p>形象一定要走在能力前面，不然你的能力容易被低估。</p> <p>先敬罗衣，后敬人；先敬皮囊，后敬魂。</p> </li> <li><strong>家庭和成长</strong>：30 多岁以后还整天把抱怨原生家庭的话放在嘴边的人，这个人就是个坏人。成年之后，你的人生观和世界观你都是有选择的权利，但你选择了不走出来和没用的抱怨</li> <li><strong>新的世界</strong>：「另一个世界确实存在，但他就在这个世界之中。」 <u>*此岸也是彼岸*</u></li> </ol> <p><strong>清醒地活着，智慧地选择，温柔地经营</strong></p> <h1 id="2025我的年度计划"><strong>✨2025，我的年度计划</strong></h1> <p><strong>关键词：厚积薄发 - 用努力积累厚度，用坚持创造高度。</strong> 💪🔥</p> <h2 id="-解锁快速学习的能力"><strong>🎯 解锁快速学习的能力</strong></h2> <p>学习新事物，快速上手：</p> <ul> <li><strong>兴趣导向</strong>：选择感兴趣的领域，激发学习动力。</li> <li><strong>主动实践</strong>：通过真实案例，在行动中掌握技能。</li> <li><strong>目标计划</strong>： <ul class="task-list"> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled"/>搭建 NAS 系统，作为学习实例。</li> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled"/>深入研究 Notion，全面提升个人资料库搭建能力。</li> </ul> </li> </ul> <h2 id="️️-运动"><strong>🏋️‍♀️ 运动</strong></h2> <ul class="task-list"> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled"/>每周保持固定频率的健身。</li> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled"/>尝试一项新运动：<strong>Hip-hop舞蹈 / 骑行 / 网球</strong></li> </ul> <h2 id="-随地大小-x"><strong>⏳ 随地大小 X</strong></h2> <p>充分利用边角料时间，让生活更有序：</p> <ul class="task-list"> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled"/>听播客：沉浸式学习，效率UP！</li> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled"/>捕捉灵感：随手记录好点子，灵感不浪费！ <ul> <li>📌：用小号聊天窗口，全端同步</li> </ul> </li> </ul> <h2 id="-生活清单劳逸结合"><strong>🌈 生活清单，劳逸结合</strong></h2> <ul class="task-list"> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled"/><strong>旅行目标</strong>：去 <strong>长沙/武汉</strong>，解锁新城市</li> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled"/><strong>新的目的地</strong>：韩国<strong>首尔</strong>，见我的韩国朋友</li> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled"/><strong>第一场演唱会</strong>：去看一次演唱会，新的尝试</li> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled"/><strong>生活技能</strong>：学会夹头发，提升日常精致感。</li> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled"/><strong>穿搭研究</strong>：花时间琢磨适合自己的穿搭风格。</li> <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled"/><strong>释放天性</strong>：玩的时候尽情去享受，解放天性！</li> </ul>]]></content><author><name></name></author><category term="Life-Plan"/><category term="复盘"/><summary type="html"><![CDATA[2024 Yearly Review & 2025 New Plan]]></summary></entry><entry><title type="html">芒格之道：如何跨学科整合，形成多元思维模型</title><link href="https://cardinalneal.github.io/blog/2025/TheTaoofMunger/" rel="alternate" type="text/html" title="芒格之道：如何跨学科整合，形成多元思维模型"/><published>2025-01-20T10:32:13+00:00</published><updated>2025-01-20T10:32:13+00:00</updated><id>https://cardinalneal.github.io/blog/2025/TheTaoofMunger</id><content type="html" xml:base="https://cardinalneal.github.io/blog/2025/TheTaoofMunger/"><![CDATA[<p>芒格之道</p> <p><strong>Keywords:</strong> 投资、生意、巴菲特、风险、投行、股东、金融、收购、机会、指数基金、思维模型、安全边际、机会成本</p> <p><strong>分类:</strong> 阅读笔记</p> <h2 id="保险">保险</h2> <p>保险 是一个好生意：因为 有 容纳资金（不是吸纳）的能力</p> <h3 id="保险浮存金-insurance-float">保险浮存金 insurance float</h3> <p>这是指保险公司在收到保费后，未支付的理赔款项所产生的短期资金流。保险公司通过投资这部分资金，能够获得收益。这部分浮存金的利用，是保险公司盈利的关键。</p> <h3 id="保险周期">保险周期：</h3> <p>保险行业存在“软周期”和“硬周期”之分。在景气时期，保险公司为了争夺市场份额，通常会降低保费并放宽承保条件，从而牺牲利润，最终导致风险的积累，一旦市场情况转坏，便进入硬周期。硬周期中，保险公司会提高保费，收紧承保条件，准备应对累积的风险。</p> <p>保险公司的规模一定要撑住，一定要越做大做强。如果保费不理想的话，我们就会后退一步，哪怕我整个保险业务都停了，只要我的资产还在手里，资产的盈利能力还在手里，那有这个资产我就能够游刃有余。</p> <h2 id="投资原则优秀的管理团队">投资原则：优秀的管理团队</h2> <p>优秀的管理团队具有以下特征：</p> <ul> <li><strong>团队领袖：</strong>你把他从火车上扔下去，扔到一个偏僻的小镇，不给他钱。他在这个小镇上诚实本分的经营，用不了多长时间，他又能够发家致富。</li> <li>自知自省： <ul> <li>充分认清客观条件的限制，充分认识自身能力的限制，谨小慎微的在限制范围内活动</li> <li>要做 智商130 但自认128的人，保持谦逊而不自满；才是真正 实用的、有意义的谦虚</li> <li>不要做 实际上智商190，自认为是250的人</li> </ul> </li> <li>企业文化： <ul> <li>在金融这个圈子里 充斥着贪婪的因子，所以要非常慎重</li> </ul> </li> <li>盈利 ≠ 赚钱： <ol> <li>投资的关键在于选择现金流稳定的公司，而非那些虽然看似盈利，但无法转化为实际现金的公司。盈利的来源应当是内生增长，而非依赖外部资金投入。</li> <li>我们要看这个盈利跟增长，这个东西它是什么东西造成的？它到底是资产不断的投入造成的，还是他自己就能够出来？前者就是你要不断的投钱进去，造出这个盈利，造出这个增长，钱就是不入袋的，这是没有现金出来的。后者他自己就能增长，他自己就能够有这个盈利水平，那么钱就是能变成源源不断的现金。【这个只是投资的逻辑】</li> </ol> </li> <li> <p>投一个好生意：</p> <p>投资 ≠ 好生意</p> <p><strong>好生意</strong>，说的是有些公司看起来很贵，价格是净资产的好几倍，你要是光看当时的价格值不值得投，那他们不值得投。但是他们是好生意，长期持有就能够带来很大的收益。可口可乐就是这样的公司，</p> <p>如何分辨好生意和烂生意，有个简单粗暴的原则是好生意每个决定都简单，想都不用想，烂生意每个决定都困难，总是进退维谷，步履维艰，</p> </li> </ul> <h2 id="陆军操点---四类人">陆军操点 - 四类人：</h2> <ol> <li>愚蠢&amp;懒惰的人：士兵 需要很多的制度，需要听严格听从指令那来去管理这种人</li> <li>聪明&amp;懒惰的人：总指挥官 在众多方案中挑选出最具有可行性&amp;最优的方案</li> <li>聪明&amp;勤奋的人：参谋团 负责制定大量作战方案</li> <li>愚蠢&amp;勤奋的人：祸害, 遣散 品行不端的人 or 愚蠢又勤奋的人 可能带来更大的危害</li> </ol> <h2 id="人生罗盘">人生罗盘</h2> <ol> <li> <p><strong>灵活应变与及时放弃</strong>:</p> <p>打得过就打，打不过就跑。就是打不过的时候不要在那里硬拼，更不要听信在一旁怂恿你去应聘的那些人 要 灵活变通+及时放弃</p> </li> <li><strong>时刻保持警惕心</strong>： <ul> <li>如果比你聪明很多的人想要骗你，你再怎么判断跟分析也很难不受骗。</li> <li>当骗子铁了心了要骗你的时候，你不要觉得自己是个聪明人就能够看得出来，你总有看不出来的那个时候。</li> </ul> </li> <li> <p><strong>stay hungry, stay stupid</strong>: 前半句，后半句 都是 同等重要， 千万不要忽略后半句</p> <p>stay hungry：我要如饥似渴的去阅读，我去吸取知识，去做很多事情。 stay stupid： 实事求是 不要去扮演聪明，不要去扮演知道，不知道就是不知道。</p> <p>【在有些情景下还是需要扮演人设】</p> </li> <li><strong>安全边际</strong>： <ul> <li>不要想着赚尽最后一个铜板</li> <li>做计划一定要给自己留余地，几乎一定会出现预期外的变动，如果你不给自己留余地，你就会崩。</li> <li>不要退出游戏，我们要第一步是要始终待在这个游戏里边，待在这个游戏里面，万事才有可能，一旦退出这个游戏，你就 game over 了。 打牌的人可不能离场</li> </ul> </li> <li> <p><strong>犯错</strong>：</p> <p>犯了错误，要非常迅速的去承认他，对待错误，态度真的要松弛一点。我们不要去在乎犯错这件事，重点不在于不犯错，而是我们能从一次犯错中尽量的多学一点东西，</p> <p>重点也不是说犯过的错误以后我就再也不能再犯了，而在于你每次犯错了之后快速承认，有所成长，灵活应对。</p> </li> <li><strong>智慧与理性</strong>： <ul> <li>脑子好就是要两个条件，1. 聪明，2. 不要做蠢事。</li> <li>脑子有缺陷：分不清轻重缓急的问题，凡是都要考虑优先级</li> </ul> </li> <li> <p><strong>惩罚而非报复</strong>：</p> <p>对于伤害他人的人，应有适当的惩罚措施，使其明白行为的代价，起到一个警示+不要得寸进尺的作用；而不是报复</p> </li> <li><strong>预防与预测：</strong> <ul> <li>预防问题 — 尽量避免问题的发生；麻烦遇到的少了，自然处理起来就游刃有余了</li> <li>预测问题 — 为不可避免的情况做好准备，做好Plan B</li> </ul> </li> </ol> <h2 id="思维模型">思维模型</h2> <h3 id="专业化思维与跨学科思维">专业化思维与跨学科思维</h3> <ul> <li>专业化思维侧重深度，跨学科思维强调广度；</li> <li>笔者认为： 60% 在专业化思维，40% 在广度</li> <li><strong>纵横模型：</strong> 先涨专业思维，然后慢慢拓宽横向，积累横向</li> </ul> <p><strong>专业跟跨学科它之间怎么平衡？</strong></p> <p>在自己的专业领域好好的专的同时，要一定要知道哪些跨学科的知识能够帮助我变得更专业。只在自己的领域，你肯定成为不了一个专家。</p> <p>现在当下年代，真正的专家都需要通过不同的角度去理解自己专业领域的事情，那才是真正的人才。而在这个过程中，你自然而然就积累了跨学科的思路了。</p> <h3 id="多元思维模型">多元思维模型</h3> <p>普世智慧的第一条就是如果你们只是记得一些孤立的事物，试图把它们硬凑起来，那么你们就无法真正的理解任何东西。如果这些事物不在一个理论框架中相互联系，你们就无法把它派上用场。</p> <ul> <li>数学： 排列组合（机会成本、概率思考、逆向思考），复利原理</li> <li>会计： 学会计是为了看到会计这门语言的局限，他在哪里可能会挖坑等着你。了解他的局限性。</li> <li>工程学： 质量控制理论（看一下丰田模式，然后看一下六Sigma）后备系统 断裂点理论</li> <li>统计学： 基础的概率 +正太啥的</li> <li>物理学 临界质量概念</li> <li>生物学和生理学</li> <li>心理学 （包括大脑神经学）</li> </ul> <p>数学:</p> <ol> <li>概率思维</li> <li> <p>机会成本思维</p> <p>做一个决策的时候要经常问自己2个问题</p> <p>Whats the alternative？- 除了这个选项之外我还有什么选择？如果你其他的选择都不如这个选项好，那你又有什么办法呢？你只能选眼前这个，哪怕你觉得眼前这个选择我也不想选，再不理想你也只能选，因为你没有别的选择了呀。那请注意在所有的选择里边，保持现状也是一个选择。你所有的现状里面，如果保持现状是最好的，那你没有办法，你只能静静的等待时机，等待下一次有没有改变的机会。</p> <p>Whats you downside？- 如果没有 downside 为什么不去做一下</p> </li> <li> <p>逆向思维：</p> <p>你想想在什么情况下可能出现最坏的组合，那你就会提前避开这个组合，然后 你的成功的可能性就提高了呀 【躲避失败，就会离成功更近】</p> </li> </ol> <p>#【两小时的这段我好像漏了】</p> <h2 id="巴菲特的成功之道">巴菲特的成功之道</h2> <ol> <li>高效的学习能力</li> </ol> <p>持续不断的学习。他从未停止过学习，保持对知识的渴求。就像龟兔赛跑中的乌龟。虽然爬得慢，但他们从未停止过学习的脚步。聪明人仗着自己聪明，骄傲自满了，不学了。学习如逆水行舟，不进则退，你不学，世界就会把你甩在身后。真正擅长学习的人从来不会放弃提前开始学习的机会</p> <ol> <li>真正的学习方法</li> </ol> <p>很多人抱怨 进入一个陌生的领域，要是没有一套现成的让你开始死记硬背的学习的那种方法存在，就不知道怎么学了。就是太依赖教科书，太依赖系统性的教学，要学习的时候第一反应就是那我应该上什么课呀？那我应该看什么书呀？在现实生活中这种思路其实是非常<strong>学生思维</strong>的。</p> <p>人生中有很多新的领域，根本不存在这种入门级别童叟无欺的入门课。反而更常见的是什么呢？更常见的是人们利用信息差来浑水摸鱼来骗你，来赚你的钱。如果大家一直是这么学生思维的话，就会准确无误地踩入这些陷阱。</p> <p>善于学习一定要从经验中学，从别人的经验中学，从自己的经验中学，从实践中学，从试错中学，从失败中学，就是你要从不同各种渠道中学学习，必须是非常灵活的。在这个过程中要自己主动的去做大量的阅读，而不是去做别人给你分派好任务的精准阅读。</p> <p>要不断的思考这件事情是很费劲的，而不是我不想思考，你能不能告诉我应该去上什么课？等你真正的做了这些事情，做了这些非常辛苦的没有现成路径的学习之后，你不会被信息差骗了，这个时候你再去判断说我应该读一本什么样的书，能够把我这些零散的东西系统化规整起来？我应该去上一个什么样的课，能够大幅的提高我的学习效率，这个时候才需要去上课、去看书。</p> <ol> <li><strong>一个团体必须要有一个灵魂人物！！！！</strong></li> </ol> <p>集权式的决策更能高效运作；由委员会领导，很多人一起商议，很难在投资或经营方面取得很大的成功。</p> <h2 id="三个好的习惯">三个好的习惯</h2> <ol> <li> <p><strong>只做自己能力圈内的事情</strong>：在自己的能力圈内复杂的事情我也可以去用简单的方式去化解和拆分进行处理。在自己的能力圈之外所有的事情我说不知道，尽量不碰</p> <p>【只赚自己认知之内的钱】</p> </li> <li><strong>雷厉风行</strong>：做事不拖拉，遇到好解决的事情马上去做，遇到必须解决的难题就和他死磕，软磨硬泡、死缠烂打，不解决不罢休。而且因为我们不做能力圈外的事情，所以我们才会有这个大量的时间能够耐心的去跟难题死磕。</li> <li><strong>兴趣是最好的导师</strong>：做事要从兴趣出发。兴趣是成功的关键。</li> </ol> <p>这 3 个习惯是相辅相成的，很多人都觉得说，哇，我好佩服，做事不拖拉，那我就是很拖延，拖延的背后简单粗暴的说就是畏难。情绪有两种畏惧，一种是畏惧忍受无聊跟艰苦的过程，就是畏惧自己不想做的事情，一方面是畏惧真正去做了以后面对后面的那个结果就是现在我已经没有办法再用借口说，嗯，不是我不会，就是我，我这个人就是拖延，对吧？就是我要不拖的话说不定就能做成了。</p> <p>现在你已经没有这个借口了，但是你想把刚才芒格说的这三个习惯结合起来之后，首先第一你只做自己能力圈的事情，那你是不是就不会去畏难了呀？其次，你只做自己感兴趣的事情，那你是不是就不会去畏惧这件事情？太无聊了，我不想干，我内心深处很抵抗他，你就不会发生这种情况了呀。</p> <p>读书也是一样，我们不要上来就读点宏观巨著，而是你先从很窄的横面，就是当下你现在要解决的是什么问题，就从这里开始，这就是我们说的兴趣阅读，当你读了，就比如说我的兴趣是为大脑提效，我就读了很多大脑神经学，你只要把这个领域扎扎实实的做好了，比如说我读了很多大脑学习神经学的书之后，你自然而然会发现它一定是涉及到心理学的，那你就开始读心理学，一定是涉及到社会学的，你就开始读社会学。一定是涉及到人类学的，你就开始读人类学，对吧？就以此类推，你就开始读历史政治，这就是涟漪一层一层荡开的效果。</p> <h2 id="last-is-not-the-least-最后总结">Last is not the least 最后总结</h2> <ol> <li>好东西卖给别人反而会赚得更多 赚良心钱，你坚持去卖好的服务跟东西，你不会赚的更少，长期来说你只会是那个活下来的，赚的更多的人。就像芒格在访谈中说的那样，能照顾好你身边的人，在麻烦来临的时候你是那个能照顾别人的人。嗯，一辈子都在积累智慧，提高理商，不去做脑子有缺陷的人，这样这件事情是一个人的 moral duty 一生的 moral duty，人一生的道德责任。</li> <li>永远走大道，人少</li> <li>人类社会应该进入到一个已经不再需要追求成功，而是要追求过好幸福的日子的这么一个时代。应该花时间在 建立深度关系，我怎么去照顾我的家人的喜好，我怎么能够让我的婚姻更加的幸福啊？我怎么能够过一个更有意义的人生？</li> </ol> <h2 id="推荐书单">推荐书单</h2> <ul> <li>《生活在极限之内》living within limits</li> <li>《洛克菲勒传》</li> <li>《自私的基因》</li> <li>《影响力》</li> <li>《迷人的温度》</li> <li>《卡耐基传》</li> <li>《探索智慧：从达尔文到芒格》</li> <li>《科学火星人：改变二十世纪的五位匈牙利犹太裔科学家》</li> <li>艾萨克森新写的爱因斯坦传</li> <li>《史上最伟大的交易》</li> <li>《战胜一切市场的人》</li> </ul> <p>show notes</p> <p>中间一段漏了到时候补上</p>]]></content><author><name></name></author><category term="Principles"/><category term="思维模型"/><category term="投资"/><summary type="html"><![CDATA[How to Integrate Across Disciplines and Form Multidimensional Thinking Models.]]></summary></entry><entry><title type="html">a post with image galleries</title><link href="https://cardinalneal.github.io/blog/2024/photo-gallery/" rel="alternate" type="text/html" title="a post with image galleries"/><published>2024-12-04T01:59:00+00:00</published><updated>2024-12-04T01:59:00+00:00</updated><id>https://cardinalneal.github.io/blog/2024/photo-gallery</id><content type="html" xml:base="https://cardinalneal.github.io/blog/2024/photo-gallery/"><![CDATA[<p>The images in this post are all zoomable, arranged into different mini-galleries using different libraries.</p> <h2 id="lightbox2"><a href="https://lokeshdhakar.com/projects/lightbox2/">Lightbox2</a></h2> <p><a href="https://cdn.photoswipe.com/photoswipe-demo-images/photos/1/img-2500.jpg" data-lightbox="roadtrip"><img src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/1/img-200.jpg"/></a> <a href="https://cdn.photoswipe.com/photoswipe-demo-images/photos/2/img-2500.jpg" data-lightbox="roadtrip"><img src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/2/img-200.jpg"/></a> <a href="https://cdn.photoswipe.com/photoswipe-demo-images/photos/3/img-2500.jpg" data-lightbox="roadtrip"><img src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/3/img-200.jpg"/></a></p> <hr/> <h2 id="photoswipe"><a href="https://photoswipe.com/">PhotoSwipe</a></h2> <div class="pswp-gallery pswp-gallery--single-column" id="gallery--getting-started"> <a href="https://cdn.photoswipe.com/photoswipe-demo-images/photos/2/img-2500.jpg" data-pswp-width="1669" data-pswp-height="2500" target="_blank"> <img src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/2/img-200.jpg" alt=""/> </a> <a href="https://cdn.photoswipe.com/photoswipe-demo-images/photos/7/img-2500.jpg" data-pswp-width="1875" data-pswp-height="2500" data-cropped="true" target="_blank"> <img src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/7/img-200.jpg" alt=""/> </a> <a href="https://unsplash.com" data-pswp-src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/3/img-2500.jpg" data-pswp-width="2500" data-pswp-height="1666" target="_blank"> <img src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/3/img-200.jpg" alt=""/> </a> <div> <a href="https://cdn.photoswipe.com/photoswipe-demo-images/photos/6/img-2500.jpg" data-pswp-width="2500" data-pswp-height="1667" target="_blank"> <img src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/6/img-200.jpg" alt=""/> </a> </div> </div> <hr/> <h2 id="spotlight-js"><a href="https://nextapps-de.github.io/spotlight/">Spotlight JS</a></h2> <div class="spotlight-group"> <a class="spotlight" href="https://cdn.photoswipe.com/photoswipe-demo-images/photos/1/img-2500.jpg"> <img src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/1/img-200.jpg"/> </a> <a class="spotlight" href="https://cdn.photoswipe.com/photoswipe-demo-images/photos/2/img-2500.jpg"> <img src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/2/img-200.jpg"/> </a> <a class="spotlight" href="https://cdn.photoswipe.com/photoswipe-demo-images/photos/3/img-2500.jpg"> <img src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/3/img-200.jpg"/> </a> </div> <div class="spotlight-group"> <a class="spotlight" href="https://cdn.photoswipe.com/photoswipe-demo-images/photos/4/img-2500.jpg"> <img src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/4/img-200.jpg"/> </a> <a class="spotlight" href="https://cdn.photoswipe.com/photoswipe-demo-images/photos/5/img-2500.jpg"> <img src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/5/img-200.jpg"/> </a> <a class="spotlight" href="https://cdn.photoswipe.com/photoswipe-demo-images/photos/6/img-2500.jpg"> <img src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/6/img-200.jpg"/> </a> </div> <hr/> <h2 id="venobox"><a href="https://veno.es/venobox/">Venobox</a></h2> <p><a class="venobox" data-gall="myGallery" href="https://cdn.photoswipe.com/photoswipe-demo-images/photos/1/img-2500.jpg"><img src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/1/img-200.jpg"/></a> <a class="venobox" data-gall="myGallery" href="https://cdn.photoswipe.com/photoswipe-demo-images/photos/2/img-2500.jpg"><img src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/2/img-200.jpg"/></a> <a class="venobox" data-gall="myGallery" href="https://cdn.photoswipe.com/photoswipe-demo-images/photos/3/img-2500.jpg"><img src="https://cdn.photoswipe.com/photoswipe-demo-images/photos/3/img-200.jpg"/></a></p>]]></content><author><name></name></author><category term="sample-posts"/><category term="formatting"/><category term="images"/><summary type="html"><![CDATA[this is what included image galleries could look like]]></summary></entry><entry><title type="html">时间贫穷，我们真的有利用好自己的时间吗？</title><link href="https://cardinalneal.github.io/blog/2024/HappyHour/" rel="alternate" type="text/html" title="时间贫穷，我们真的有利用好自己的时间吗？"/><published>2024-11-12T00:32:13+00:00</published><updated>2024-11-12T00:32:13+00:00</updated><id>https://cardinalneal.github.io/blog/2024/HappyHour</id><content type="html" xml:base="https://cardinalneal.github.io/blog/2024/HappyHour/"><![CDATA[<h1 id="时间贫穷我们真的有利用好自己的时间吗"><strong>时间贫穷，我们真的有利用好自己的时间吗？</strong></h1> <h2 id="什么是时间贫困"><strong>什么是时间贫困？</strong></h2> <ul> <li> <p>可自由支配时间</p> <p>每日可自由支配时间在 2-5 小时之间达到满足感&amp;幸福感的峰值。超过或低于这个时间，满足感都会下降。在这个时间区间，关键在于如何高质量利用这些时间，而非时长本身。</p> </li> <li> <p><strong>时间贫困的本质</strong></p> <p>时间贫困不仅仅是指自由时间的缺乏，而是一种主观感受：对时间的掌控与充实感。为提升这种充实感，可以通过以下两点来调整心态：</p> <ol> <li><strong>积极聚焦</strong> - 专注于让人积极愉悦的活动。</li> <li><strong>避免消极思维</strong> - 不执着于负面的情绪或压力。</li> </ol> <p>同时<strong>增强自信心、运动、行善和敬畏感</strong>：这些因素能提升对时间的富足感。</p> </li> </ul> <p>你的目标感跟意义感越重，其实你的快乐指数越高，所以为了获得更大的目标感，也就是让自己的人生过得更快乐，那他就决定一定要把所有的事情，尽量的围绕这个目标来转，而不要再去花那么多的时间去做一些离我的目标其实不是那么近的事情。</p> <hr/> <h2 id="快乐是一种主动选择"><strong>快乐是一种主动选择</strong></h2> <p>快乐不是本能，而是有意的选择。我们可以通过<strong>记录时间与情绪</strong>来提升自我认知，从而有目的地选择快乐</p> <h3 id="记录时间--be-honest-to-yourself">记录时间： BE HONEST TO YOURSELF</h3> <p>方法：日历+各个色块</p> <h3 id="记录时间的意义">记录时间的意义</h3> <ul> <li> <p><strong>诚实面对自己</strong></p> <p>记录时间可以帮助理解时间的实际分配，避免主观错觉。越多的记录能提供越多的信息，帮助自我认知，明确个人目标和优先事项。</p> </li> <li> <p><strong>高效与稳定</strong></p> <p>不必追求一日高效，而是保持稳定的高效。高效的娱乐和工作应有比例，形成健康的生活节奏。</p> </li> <li> <p><strong>掌握时间 √</strong></p> <p>精准判断时间，这是一种可以锻炼出来的能力。准确预估熟悉的任务，动态调整不熟悉的任务。这样就不会出现因为一天安排太多任务导致挫折感，和成就感的损失</p> </li> <li> <p><strong>真正的自由</strong></p> <p>自由并非随心所欲，而是清晰了解自己是谁，知道自己的使命和目标，并坚定向目标前行。</p> </li> <li> <p><strong>调整，改变，收获</strong></p> <p>例子 - 看书： 这件事情我<strong>持续做的太长的话，它其实后面一半儿的那个时间的快乐是减损的</strong>，这肯定就是这，大家肯定有相应的这个感觉哈。就是因为我记录的时间，记录的快乐时，我意识到了之后，其实我每一次看书的时间就会控制在相应的时间之内。甚至我有时候看半小时我都会觉得很开心，而不像以前我觉得看书必须要空出两三个小时我才能够看。总之记录你的时间和快乐值，你会有很多新的信息、新的收获，你能够对自己有更深的认知，这件事情本身就很让人快乐。</p> </li> </ul> <p>记录 → 回顾 → 总结 → 改变 → 记录 良性循环</p> <hr/> <h2 id="是什么让我们快乐和不快乐"><strong>是什么让我们快乐和不快乐</strong></h2> <h3 id="快乐的本质"><strong>快乐的本质</strong></h3> <ul> <li> <p>快乐分为“当下快乐”和“未来快乐”</p> <p><strong>区别</strong>：快乐活动带来持久愉悦，而依赖多巴胺驱动的活动短暂满足后常带来内疚感。</p> <p>例子：<strong>「刷手机」</strong> 玩游戏的头 15 分钟，它是快乐的，只要不超过 15 分钟，我发现我的快乐值得记录都很高，但是一旦超过 15 分钟，快乐值就会锐减。</p> </li> <li> <p><strong>快乐的组成</strong></p> <p>真正让人快乐的活动通常包含以下元素：</p> <ol> <li><strong>投入感</strong> - 产生心流的时刻。</li> <li><strong>高质量社交</strong> - 建立深层联系。</li> <li><strong>目标感与意义感</strong> - 让活动与个人目标一致。</li> <li><strong>成就感</strong> - 完成有挑战的任务。</li> </ol> </li> </ul> <h3 id="如何增加快乐值">如何增加快乐值</h3> <p><strong>减少不快乐的事情 &amp; 增加快乐的事情；</strong> 当然 减少不快乐的事情 优先级大于 增加快乐的事情</p> <h3 id="不快乐的三个阻碍">不快乐的三个阻碍</h3> <ol> <li><strong>缺乏链接性</strong> - 无法建立真正的人际连接。</li> <li><strong>缺乏自主性</strong> - 他人指使的任务会降低满足感，即使本身这件事是自己想做的</li> <li><strong>能力受限</strong> - 无法发挥自我潜力，产生自卑，自我贬低或负面情绪。</li> </ol> <h3 id="快乐追踪练习">「快乐追踪」练习</h3> <blockquote> <p>写下 你最快乐的三件事情 &amp; 写下 你最不快乐的三件事情。找出其中的共同点，需要记录的是 人物，时间，事件，地点</p> </blockquote> <p><strong>一般最快乐的事情 会是和人际关系有关</strong></p> <p>在跟朋友聊天的时候，可以不要只谈一些表层的，可以谈一些深层灵魂的东西，比如 你最近一次如何如何是什么时候？</p> <p>第二就是<strong>户外</strong> [not me]</p> <p>大家一定要记住快乐和连接密切相关，定期维护人际关系也是快乐的来源</p> <p>而且不要忘记帮助他人做善事也是产生连接感的一个途径。</p> <p><strong>常见不快乐的事件：</strong></p> <ol> <li> <p>高分不快乐事件：漫无目的的刷社交媒体上的信息</p> <p>会让人丧失意义感，总整个人会变得越来越孤独，越来越掀起<strong>信息茧房</strong>和自卑的这么一种行为</p> </li> <li> <p>高分不快乐事件：<u>通勤</u></p> </li> </ol> <h3 id="情绪兴奋剂">情绪兴奋剂</h3> <p>不管怎么样做了以后都会觉得很开心</p> <ol> <li>运动</li> <li>睡眠</li> </ol> <hr/> <h2 id="无法避免不快乐事件如何减少不快乐"><strong>无法避免不快乐事件，如何减少不快乐</strong></h2> <h3 id="策略一外包">策略一：外包</h3> <ul> <li>例如，外包家务。</li> </ul> <h3 id="策略二捆绑策略">策略二：捆绑策略</h3> <ul> <li>把不快乐的事与有趣的事捆绑，例如： <ul> <li>做家务 + 听播客</li> <li>通勤 + 听播客</li> <li>运动 + 玩游戏</li> <li>通勤 + 骑自行车</li> </ul> </li> </ul> <h3 id="策略三找到目标感和意义感">策略三：找到目标感和意义感</h3> <ul> <li>当找到目标感后，尽量细化它，越具体越容易获得目标感。可以尝试使用“5个为什么”方法，逐层探究“为什么”。如果在工作上真的找不到目标感&amp;意义感，退而求其次就是 和同事之间的链接感</li> </ul> <hr/> <h2 id="如何让平凡生活变得快乐">如何让平凡生活变得快乐</h2> <h3 id="享乐适应">享乐适应</h3> <ul> <li>快乐和痛苦都是短暂的，因为人具有适应性。</li> <li>学会从平凡和已有的快乐中挖掘更多满足感。年轻时追求不平凡的快乐，随着年龄增长，逐渐发现平凡的快乐同样令人满足。</li> </ul> <h3 id="方法一计算快乐的剩余进度">方法一：计算快乐的剩余进度</h3> <ul> <li>把事情进度当作进度条，计算已完成部分的时间，预测剩余时间，这样能更珍惜平淡的过程。</li> </ul> <h3 id="方法二增加仪式感">方法二：增加仪式感</h3> <ul> <li>让日常生活更有趣味，设置仪式感；例如： <ul> <li>泡澡</li> <li>使用特别的餐具或杯子</li> <li>读书</li> <li>睡眠</li> <li><u>起床</u>等日常活动</li> </ul> </li> </ul> <h3 id="方法三中场休息">方法三：中场休息</h3> <ul> <li>在长时间的快乐事件中，安排短暂休息，能带来新的愉悦感。</li> </ul> <hr/> <h2 id="活在当下"><strong>「活在当下」</strong></h2> <p><strong>方法一：像度假一样过周末</strong></p> <ul> <li>虽然未必适合每个人，但偶尔优先安排类似度假的活动，放松身心。</li> </ul> <p><strong>方法二：五感冥想</strong></p> <ul> <li>尝试找出： <ul> <li>5件可以看到的事物</li> <li>4件可以触摸的事物</li> <li>3件可以听到的事物</li> <li>2件可以闻到的事物</li> <li>1件可以尝到的事物</li> </ul> </li> </ul> <p><strong>方法三：尝试断网一天</strong></p> <ul> <li>让自己短暂脱离网络，享受无干扰的时光。</li> </ul> <hr/> <h2 id="储时罐理论">储时罐理论</h2> <h3 id="填充顺序大石头--小石子--细沙--水">填充顺序：大石头 → 小石子 → 细沙 → 水</h3> <ul> <li>大石头代表最优先级的事件，不一定是最大、最耗时间的项目。</li> </ul> <h3 id="细沙陷阱"><strong>细沙陷阱</strong></h3> <p><strong>定义</strong>：可有可无、不重要的事情填满了时间，导致优先级更高的事项没有时间处理。</p> <ol> <li>刷手机：占用时间的常见细沙陷阱。若一天时间已分配完，可以随意刷，但要避免用在重要时间里优先分配刷手机的时间。</li> <li>回复消息：频繁回复不重要的消息也是细沙陷阱。</li> <li> <p>过度承诺：由于对未来时间的感知不准确，人们容易答应过多活动，导致真正重要的事项被忽略。</p> <p>一个真正的付出者，必须要先自立，只有自立的付出者能够做的长远。自立的一个表现就是选择自己喜欢的时间、地点和帮助的对象。</p> </li> </ol> <p><strong>解决方法</strong>：先安排大石块事件，谨慎规划未来时间，避免陷入时间贫困状态。</p> <h3 id="两个过滤器">两个<strong>「</strong>过滤器<strong>」</strong></h3> <ol> <li><strong>目标过滤器</strong> <ul> <li>当你有明确的目标，就能过滤掉不在目标路径上的无关事务。</li> </ul> </li> <li><strong>快乐过滤器</strong> <ul> <li>延迟满足虽然重要，但不要过度谨慎，忽略当下的快乐。偶尔放松、享受生活中的小乐趣。</li> </ul> </li> </ol> <hr/> <h2 id="结语---体会快乐的细碎时光">结语 - 体会快乐的细碎时光</h2> <blockquote> <p>工作狂常忘记生活中的快乐，直到回忆过去时发现，不后悔的那些年总有些微小的快乐。这些快乐可能源自认识新朋友、尝试新活动、和朋友在路上大笑，甚至是一些疯狂的事情。</p> </blockquote> <blockquote> <p>生活中的小快乐，如沙滩上的闪亮贝壳，让人回忆起那些有意义的岁月。不要过分追求远见，延迟满足的过度谨慎反而可能浪费生命。</p> </blockquote>]]></content><author><name></name></author><category term="Principles"/><category term="人际关系"/><category term="时间管理"/><summary type="html"><![CDATA[how to manage time and happyness]]></summary></entry><entry><title type="html">Google Gemini updates: Flash 1.5, Gemma 2 and Project Astra</title><link href="https://cardinalneal.github.io/blog/2024/google-gemini-updates-flash-15-gemma-2-and-project-astra/" rel="alternate" type="text/html" title="Google Gemini updates: Flash 1.5, Gemma 2 and Project Astra"/><published>2024-05-14T00:00:00+00:00</published><updated>2024-05-14T00:00:00+00:00</updated><id>https://cardinalneal.github.io/blog/2024/google-gemini-updates-flash-15-gemma-2-and-project-astra</id><content type="html" xml:base="https://cardinalneal.github.io/blog/2024/google-gemini-updates-flash-15-gemma-2-and-project-astra/"><![CDATA[]]></content><author><name></name></author><summary type="html"><![CDATA[We’re sharing updates across our Gemini family of models and a glimpse of Project Astra, our vision for the future of AI assistants.]]></summary></entry><entry><title type="html">a post with tabs</title><link href="https://cardinalneal.github.io/blog/2024/tabs/" rel="alternate" type="text/html" title="a post with tabs"/><published>2024-05-01T00:32:13+00:00</published><updated>2024-05-01T00:32:13+00:00</updated><id>https://cardinalneal.github.io/blog/2024/tabs</id><content type="html" xml:base="https://cardinalneal.github.io/blog/2024/tabs/"><![CDATA[<p>This is how a post with <a href="https://github.com/Ovski4/jekyll-tabs">tabs</a> looks like. Note that the tabs could be used for different purposes, not only for code.</p> <h2 id="first-tabs">First tabs</h2> <p>To add tabs, use the following syntax:</p> <div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">{%</span><span class="w"> </span><span class="nt">tabs</span><span class="w"> </span><span class="nv">group-name</span><span class="w"> </span><span class="cp">%}</span>

<span class="cp">{%</span><span class="w"> </span><span class="nt">tab</span><span class="w"> </span><span class="nv">group-name</span><span class="w"> </span><span class="nv">tab-name-1</span><span class="w"> </span><span class="cp">%}</span>

Content 1

<span class="cp">{%</span><span class="w"> </span><span class="nt">endtab</span><span class="w"> </span><span class="cp">%}</span>

<span class="cp">{%</span><span class="w"> </span><span class="nt">tab</span><span class="w"> </span><span class="nv">group-name</span><span class="w"> </span><span class="nv">tab-name-2</span><span class="w"> </span><span class="cp">%}</span>

Content 2

<span class="cp">{%</span><span class="w"> </span><span class="nt">endtab</span><span class="w"> </span><span class="cp">%}</span>

<span class="cp">{%</span><span class="w"> </span><span class="nt">endtabs</span><span class="w"> </span><span class="cp">%}</span>
</code></pre></div></div> <p>With this you can generate visualizations like:</p> <ul id="log" class="tab" data-tab="fd70d178-ebb5-4a72-84c5-4c6286e3661b" data-name="log"> <li class="active" id="log-php"> <a href="#">php </a> </li> <li id="log-js"> <a href="#">js </a> </li> <li id="log-ruby"> <a href="#">ruby </a> </li> </ul> <ul class="tab-content" id="fd70d178-ebb5-4a72-84c5-4c6286e3661b" data-name="log"> <li class="active"> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">var_dump</span><span class="p">(</span><span class="s1">'hello'</span><span class="p">);</span>
</code></pre></div></div> </li> <li> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">hello</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div> </li> <li> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">pputs</span> <span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span>
</code></pre></div></div> </li> </ul> <h2 id="another-example">Another example</h2> <ul id="data-struct" class="tab" data-tab="7d5c4100-afbc-4d88-a06a-945f2ce5f60e" data-name="data-struct"> <li class="active" id="data-struct-yaml"> <a href="#">yaml </a> </li> <li id="data-struct-json"> <a href="#">json </a> </li> </ul> <ul class="tab-content" id="7d5c4100-afbc-4d88-a06a-945f2ce5f60e" data-name="data-struct"> <li class="active"> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">hello</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">whatsup"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">hi"</span>
</code></pre></div></div> </li> <li> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"hello"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"whatsup"</span><span class="p">,</span><span class="w"> </span><span class="s2">"hi"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> </li> </ul> <h2 id="tabs-for-something-else">Tabs for something else</h2> <ul id="something-else" class="tab" data-tab="2b0973c0-65c2-4af6-8dc9-c62c18ab7337" data-name="something-else"> <li class="active" id="something-else-text"> <a href="#">text </a> </li> <li id="something-else-quote"> <a href="#">quote </a> </li> <li id="something-else-list"> <a href="#">list </a> </li> </ul> <ul class="tab-content" id="2b0973c0-65c2-4af6-8dc9-c62c18ab7337" data-name="something-else"> <li class="active"> <p>Regular text</p> </li> <li> <blockquote> <p>A quote</p> </blockquote> </li> <li> <p>Hipster list</p> <ul> <li>brunch</li> <li>fixie</li> <li>raybans</li> <li>messenger bag</li> </ul> </li> </ul>]]></content><author><name></name></author><category term="sample-posts"/><category term="formatting"/><category term="code"/><summary type="html"><![CDATA[this is what included tabs in a post could look like]]></summary></entry><entry><title type="html">a post with typograms</title><link href="https://cardinalneal.github.io/blog/2024/typograms/" rel="alternate" type="text/html" title="a post with typograms"/><published>2024-04-29T23:36:10+00:00</published><updated>2024-04-29T23:36:10+00:00</updated><id>https://cardinalneal.github.io/blog/2024/typograms</id><content type="html" xml:base="https://cardinalneal.github.io/blog/2024/typograms/"><![CDATA[<p>This is an example post with some <a href="https://github.com/google/typograms/">typograms</a> code.</p> <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span><span class="nl">typograms
</span><span class="sb">+----+
|    |---&gt; My first diagram!
+----+</span>
<span class="p">```</span>
</code></pre></div></div> <p>Which generates:</p> <pre><code class="language-typograms">+----+
|    |---&gt; My first diagram!
+----+
</code></pre> <p>Another example:</p> <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span><span class="nl">typograms
</span><span class="sb">.------------------------.
|.----------------------.|
||"https://example.com" ||
|'----------------------'|
| ______________________ |
||                      ||
||   Welcome!           ||
||                      ||
||                      ||
||  .----------------.  ||
||  | username       |  ||
||  '----------------'  ||
||  .----------------.  ||
||  |"*******"       |  ||
||  '----------------'  ||
||                      ||
||  .----------------.  ||
||  |   "Sign-up"    |  ||
||  '----------------'  ||
||                      ||
|+----------------------+|
.------------------------.</span>
<span class="p">```</span>
</code></pre></div></div> <p>which generates:</p> <pre><code class="language-typograms">.------------------------.
|.----------------------.|
||"https://example.com" ||
|'----------------------'|
| ______________________ |
||                      ||
||   Welcome!           ||
||                      ||
||                      ||
||  .----------------.  ||
||  | username       |  ||
||  '----------------'  ||
||  .----------------.  ||
||  |"*******"       |  ||
||  '----------------'  ||
||                      ||
||  .----------------.  ||
||  |   "Sign-up"    |  ||
||  '----------------'  ||
||                      ||
|+----------------------+|
.------------------------.
</code></pre> <p>For more examples, check out the <a href="https://google.github.io/typograms/#examples">typograms documentation</a>.</p>]]></content><author><name></name></author><category term="sample-posts"/><category term="formatting"/><category term="diagrams"/><summary type="html"><![CDATA[this is what included typograms code could look like]]></summary></entry><entry><title type="html">a post that can be cited</title><link href="https://cardinalneal.github.io/blog/2024/post-citation/" rel="alternate" type="text/html" title="a post that can be cited"/><published>2024-04-28T15:06:00+00:00</published><updated>2024-04-28T15:06:00+00:00</updated><id>https://cardinalneal.github.io/blog/2024/post-citation</id><content type="html" xml:base="https://cardinalneal.github.io/blog/2024/post-citation/"><![CDATA[<p>This is an example post that can be cited. The content of the post ends here, while the citation information is automatically provided below. The only thing needed is for you to set the <code class="language-plaintext highlighter-rouge">citation</code> key in the front matter to <code class="language-plaintext highlighter-rouge">true</code>.</p>]]></content><author><name></name></author><category term="sample-posts"/><category term="formatting"/><category term="citation"/><summary type="html"><![CDATA[this is what a post that can be cited looks like]]></summary></entry><entry><title type="html">a post with pseudo code</title><link href="https://cardinalneal.github.io/blog/2024/pseudocode/" rel="alternate" type="text/html" title="a post with pseudo code"/><published>2024-04-15T00:01:00+00:00</published><updated>2024-04-15T00:01:00+00:00</updated><id>https://cardinalneal.github.io/blog/2024/pseudocode</id><content type="html" xml:base="https://cardinalneal.github.io/blog/2024/pseudocode/"><![CDATA[<p>This is an example post with some pseudo code rendered by <a href="https://github.com/SaswatPadhi/pseudocode.js">pseudocode</a>. The example presented here is the same as the one in the <a href="https://saswat.padhi.me/pseudocode.js/">pseudocode.js</a> documentation, with only one simple but important change: everytime you would use <code class="language-plaintext highlighter-rouge">$</code>, you should use <code class="language-plaintext highlighter-rouge">$$</code> instead. Also, note that the <code class="language-plaintext highlighter-rouge">pseudocode</code> key in the front matter is set to <code class="language-plaintext highlighter-rouge">true</code> to enable the rendering of pseudo code. As an example, using this code:</p> <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span><span class="nl">pseudocode
</span><span class="sb">% This quicksort algorithm is extracted from Chapter 7, Introduction to Algorithms (3rd edition)
\begin{algorithm}
\caption{Quicksort}
\begin{algorithmic}
\PROCEDURE{Quicksort}{$$A, p, r$$}
    \IF{$$p &lt; r$$}
        \STATE $$q = $$ \CALL{Partition}{$$A, p, r$$}
        \STATE \CALL{Quicksort}{$$A, p, q - 1$$}
        \STATE \CALL{Quicksort}{$$A, q + 1, r$$}
    \ENDIF
\ENDPROCEDURE
\PROCEDURE{Partition}{$$A, p, r$$}
    \STATE $$x = A[r]$$
    \STATE $$i = p - 1$$
    \FOR{$$j = p$$ \TO $$r - 1$$}
        \IF{$$A[j] &lt; x$$}
            \STATE $$i = i + 1$$
            \STATE exchange
            $$A[i]$$ with $$A[j]$$
        \ENDIF
        \STATE exchange $$A[i]$$ with $$A[r]$$
    \ENDFOR
\ENDPROCEDURE
\end{algorithmic}
\end{algorithm}</span>
<span class="p">```</span>
</code></pre></div></div> <p>Generates:</p> <pre><code class="language-pseudocode">% This quicksort algorithm is extracted from Chapter 7, Introduction to Algorithms (3rd edition)
\begin{algorithm}
\caption{Quicksort}
\begin{algorithmic}
\PROCEDURE{Quicksort}{$$A, p, r$$}
    \IF{$$p &lt; r$$}
        \STATE $$q = $$ \CALL{Partition}{$$A, p, r$$}
        \STATE \CALL{Quicksort}{$$A, p, q - 1$$}
        \STATE \CALL{Quicksort}{$$A, q + 1, r$$}
    \ENDIF
\ENDPROCEDURE
\PROCEDURE{Partition}{$$A, p, r$$}
    \STATE $$x = A[r]$$
    \STATE $$i = p - 1$$
    \FOR{$$j = p$$ \TO $$r - 1$$}
        \IF{$$A[j] &lt; x$$}
            \STATE $$i = i + 1$$
            \STATE exchange
            $$A[i]$$ with $$A[j]$$
        \ENDIF
        \STATE exchange $$A[i]$$ with $$A[r]$$
    \ENDFOR
\ENDPROCEDURE
\end{algorithmic}
\end{algorithm}
</code></pre>]]></content><author><name></name></author><category term="sample-posts"/><category term="formatting"/><category term="code"/><summary type="html"><![CDATA[this is what included pseudo code could look like]]></summary></entry><entry><title type="html">a post with code diff</title><link href="https://cardinalneal.github.io/blog/2024/code-diff/" rel="alternate" type="text/html" title="a post with code diff"/><published>2024-01-27T19:22:00+00:00</published><updated>2024-01-27T19:22:00+00:00</updated><id>https://cardinalneal.github.io/blog/2024/code-diff</id><content type="html" xml:base="https://cardinalneal.github.io/blog/2024/code-diff/"><![CDATA[<p>You can display diff code by using the regular markdown syntax:</p> <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span><span class="nl">diff
</span><span class="gh">diff --git a/sample.js b/sample.js
index 0000001..0ddf2ba
</span><span class="gd">--- a/sample.js
</span><span class="gi">+++ b/sample.js
</span><span class="p">@@ -1 +1 @@</span>
<span class="gd">-console.log("Hello World!")
</span><span class="gi">+console.log("Hello from Diff2Html!")</span>
<span class="p">```</span>
</code></pre></div></div> <p>Which generates:</p> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/sample.js b/sample.js
index 0000001..0ddf2ba
</span><span class="gd">--- a/sample.js
</span><span class="gi">+++ b/sample.js
</span><span class="p">@@ -1 +1 @@</span>
<span class="gd">-console.log("Hello World!")
</span><span class="gi">+console.log("Hello from Diff2Html!")
</span></code></pre></div></div> <p>But this is difficult to read, specially if you have a large diff. You can use <a href="https://diff2html.xyz/">diff2html</a> to display a more readable version of the diff. For this, just use <code class="language-plaintext highlighter-rouge">diff2html</code> instead of <code class="language-plaintext highlighter-rouge">diff</code> for the code block language:</p> <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span><span class="nl">diff2html
</span><span class="sb">diff --git a/sample.js b/sample.js
index 0000001..0ddf2ba
--- a/sample.js
+++ b/sample.js
@@ -1 +1 @@
-console.log("Hello World!")
+console.log("Hello from Diff2Html!")</span>
<span class="p">```</span>
</code></pre></div></div> <p>If we use a longer example, for example <a href="https://github.com/rtfpessoa/diff2html/commit/c2c253d3e3f8b8b267f551e659f72b44ca2ac927">this commit from diff2html</a>, it will generate the following output:</p> <pre><code class="language-diff2html">From 2aaae31cc2a37bfff83430c2c914b140bee59b6a Mon Sep 17 00:00:00 2001
From: Rodrigo Fernandes &lt;rtfrodrigo@gmail.com&gt;
Date: Sun, 9 Oct 2016 16:41:54 +0100
Subject: [PATCH 1/2] Initial template override support

---
 scripts/hulk.js                    |  4 ++--
 src/diff2html.js                   |  3 +--
 src/file-list-printer.js           | 11 ++++++++---
 src/hoganjs-utils.js               | 29 +++++++++++++++++------------
 src/html-printer.js                |  6 ++++++
 src/line-by-line-printer.js        |  6 +++++-
 src/side-by-side-printer.js        |  6 +++++-
 test/file-list-printer-tests.js    |  2 +-
 test/hogan-cache-tests.js          | 18 +++++++++++++++---
 test/line-by-line-tests.js         |  3 +--
 test/side-by-side-printer-tests.js |  3 +--
 11 files changed, 62 insertions(+), 29 deletions(-)

diff --git a/scripts/hulk.js b/scripts/hulk.js
index 5a793c18..a4b1a4d5 100755
--- a/scripts/hulk.js
+++ b/scripts/hulk.js
@@ -173,11 +173,11 @@ function namespace(name) {
 // write a template foreach file that matches template extension
 templates = extractFiles(options.argv.remain)
   .map(function(file) {
-    var openedFile = fs.readFileSync(file, 'utf-8');
+    var openedFile = fs.readFileSync(file, 'utf-8').trim();
     var name;
     if (!openedFile) return;
     name = namespace(path.basename(file).replace(/\..*$/, ''));
-    openedFile = removeByteOrderMark(openedFile.trim());
+    openedFile = removeByteOrderMark(openedFile);
     openedFile = wrap(file, name, openedFile);
     if (!options.outputdir) return openedFile;
     fs.writeFileSync(path.join(options.outputdir, name + '.js')
diff --git a/src/diff2html.js b/src/diff2html.js
index 21b0119e..64e138f5 100644
--- a/src/diff2html.js
+++ b/src/diff2html.js
@@ -7,7 +7,6 @@

 (function() {
   var diffParser = require('./diff-parser.js').DiffParser;
-  var fileLister = require('./file-list-printer.js').FileListPrinter;
   var htmlPrinter = require('./html-printer.js').HtmlPrinter;

   function Diff2Html() {
@@ -43,7 +42,7 @@

     var fileList = '';
     if (configOrEmpty.showFiles === true) {
-      fileList = fileLister.generateFileList(diffJson, configOrEmpty);
+      fileList = htmlPrinter.generateFileListSummary(diffJson, configOrEmpty);
     }

     var diffOutput = '';
diff --git a/src/file-list-printer.js b/src/file-list-printer.js
index e408d9b2..1e0a2c61 100644
--- a/src/file-list-printer.js
+++ b/src/file-list-printer.js
@@ -8,11 +8,16 @@
 (function() {
   var printerUtils = require('./printer-utils.js').PrinterUtils;

-  var hoganUtils = require('./hoganjs-utils.js').HoganJsUtils;
+  var hoganUtils;
+
   var baseTemplatesPath = 'file-summary';
   var iconsBaseTemplatesPath = 'icon';

-  function FileListPrinter() {
+  function FileListPrinter(config) {
+    this.config = config;
+
+    var HoganJsUtils = require('./hoganjs-utils.js').HoganJsUtils;
+    hoganUtils = new HoganJsUtils(config);
   }

   FileListPrinter.prototype.generateFileList = function(diffFiles) {
@@ -38,5 +43,5 @@
     });
   };

-  module.exports.FileListPrinter = new FileListPrinter();
+  module.exports.FileListPrinter = FileListPrinter;
 })();
diff --git a/src/hoganjs-utils.js b/src/hoganjs-utils.js
index 9949e5fa..0dda08d7 100644
--- a/src/hoganjs-utils.js
+++ b/src/hoganjs-utils.js
@@ -8,18 +8,19 @@
 (function() {
   var fs = require('fs');
   var path = require('path');
-
   var hogan = require('hogan.js');

   var hoganTemplates = require('./templates/diff2html-templates.js');

-  var templatesPath = path.resolve(__dirname, 'templates');
+  var extraTemplates;

-  function HoganJsUtils() {
+  function HoganJsUtils(configuration) {
+    this.config = configuration || {};
+    extraTemplates = this.config.templates || {};
   }

-  HoganJsUtils.prototype.render = function(namespace, view, params, configuration) {
-    var template = this.template(namespace, view, configuration);
+  HoganJsUtils.prototype.render = function(namespace, view, params) {
+    var template = this.template(namespace, view);
     if (template) {
       return template.render(params);
     }
@@ -27,17 +28,16 @@
     return null;
   };

-  HoganJsUtils.prototype.template = function(namespace, view, configuration) {
-    var config = configuration || {};
+  HoganJsUtils.prototype.template = function(namespace, view) {
     var templateKey = this._templateKey(namespace, view);

-    return this._getTemplate(templateKey, config);
+    return this._getTemplate(templateKey);
   };

-  HoganJsUtils.prototype._getTemplate = function(templateKey, config) {
+  HoganJsUtils.prototype._getTemplate = function(templateKey) {
     var template;

-    if (!config.noCache) {
+    if (!this.config.noCache) {
       template = this._readFromCache(templateKey);
     }

@@ -53,6 +53,7 @@

     try {
       if (fs.readFileSync) {
+        var templatesPath = path.resolve(__dirname, 'templates');
         var templatePath = path.join(templatesPath, templateKey);
         var templateContent = fs.readFileSync(templatePath + '.mustache', 'utf8');
         template = hogan.compile(templateContent);
@@ -66,12 +67,16 @@
   };

   HoganJsUtils.prototype._readFromCache = function(templateKey) {
-    return hoganTemplates[templateKey];
+    return extraTemplates[templateKey] || hoganTemplates[templateKey];
   };

   HoganJsUtils.prototype._templateKey = function(namespace, view) {
     return namespace + '-' + view;
   };

-  module.exports.HoganJsUtils = new HoganJsUtils();
+  HoganJsUtils.prototype.compile = function(templateStr) {
+    return hogan.compile(templateStr);
+  };
+
+  module.exports.HoganJsUtils = HoganJsUtils;
 })();
diff --git a/src/html-printer.js b/src/html-printer.js
index 585d5b66..13f83047 100644
--- a/src/html-printer.js
+++ b/src/html-printer.js
@@ -8,6 +8,7 @@
 (function() {
   var LineByLinePrinter = require('./line-by-line-printer.js').LineByLinePrinter;
   var SideBySidePrinter = require('./side-by-side-printer.js').SideBySidePrinter;
+  var FileListPrinter = require('./file-list-printer.js').FileListPrinter;

   function HtmlPrinter() {
   }
@@ -22,5 +23,10 @@
     return sideBySidePrinter.generateSideBySideJsonHtml(diffFiles);
   };

+  HtmlPrinter.prototype.generateFileListSummary = function(diffJson, config) {
+    var fileListPrinter = new FileListPrinter(config);
+    return fileListPrinter.generateFileList(diffJson);
+  };
+
   module.exports.HtmlPrinter = new HtmlPrinter();
 })();
diff --git a/src/line-by-line-printer.js b/src/line-by-line-printer.js
index b07eb53c..d230bedd 100644
--- a/src/line-by-line-printer.js
+++ b/src/line-by-line-printer.js
@@ -11,7 +11,8 @@
   var utils = require('./utils.js').Utils;
   var Rematch = require('./rematch.js').Rematch;

-  var hoganUtils = require('./hoganjs-utils.js').HoganJsUtils;
+  var hoganUtils;
+
   var genericTemplatesPath = 'generic';
   var baseTemplatesPath = 'line-by-line';
   var iconsBaseTemplatesPath = 'icon';
@@ -19,6 +20,9 @@

   function LineByLinePrinter(config) {
     this.config = config;
+
+    var HoganJsUtils = require('./hoganjs-utils.js').HoganJsUtils;
+    hoganUtils = new HoganJsUtils(config);
   }

   LineByLinePrinter.prototype.makeFileDiffHtml = function(file, diffs) {
diff --git a/src/side-by-side-printer.js b/src/side-by-side-printer.js
index bbf1dc8d..5e3033b3 100644
--- a/src/side-by-side-printer.js
+++ b/src/side-by-side-printer.js
@@ -11,7 +11,8 @@
   var utils = require('./utils.js').Utils;
   var Rematch = require('./rematch.js').Rematch;

-  var hoganUtils = require('./hoganjs-utils.js').HoganJsUtils;
+  var hoganUtils;
+
   var genericTemplatesPath = 'generic';
   var baseTemplatesPath = 'side-by-side';
   var iconsBaseTemplatesPath = 'icon';
@@ -26,6 +27,9 @@

   function SideBySidePrinter(config) {
     this.config = config;
+
+    var HoganJsUtils = require('./hoganjs-utils.js').HoganJsUtils;
+    hoganUtils = new HoganJsUtils(config);
   }

   SideBySidePrinter.prototype.makeDiffHtml = function(file, diffs) {
diff --git a/test/file-list-printer-tests.js b/test/file-list-printer-tests.js
index a502a46f..60ea3208 100644
--- a/test/file-list-printer-tests.js
+++ b/test/file-list-printer-tests.js
@@ -1,6 +1,6 @@
 var assert = require('assert');

-var fileListPrinter = require('../src/file-list-printer.js').FileListPrinter;
+var fileListPrinter = new (require('../src/file-list-printer.js').FileListPrinter)();

 describe('FileListPrinter', function() {
   describe('generateFileList', function() {
diff --git a/test/hogan-cache-tests.js b/test/hogan-cache-tests.js
index 190bf6f8..3bb754ac 100644
--- a/test/hogan-cache-tests.js
+++ b/test/hogan-cache-tests.js
@@ -1,6 +1,6 @@
 var assert = require('assert');

-var HoganJsUtils = require('../src/hoganjs-utils.js').HoganJsUtils;
+var HoganJsUtils = new (require('../src/hoganjs-utils.js').HoganJsUtils)();
 var diffParser = require('../src/diff-parser.js').DiffParser;

 describe('HoganJsUtils', function() {
@@ -21,16 +21,28 @@ describe('HoganJsUtils', function() {
       });
       assert.equal(emptyDiffHtml, result);
     });
+
     it('should render view without cache', function() {
       var result = HoganJsUtils.render('generic', 'empty-diff', {
         contentClass: 'd2h-code-line',
         diffParser: diffParser
       }, {noCache: true});
-      assert.equal(emptyDiffHtml + '\n', result);
+      assert.equal(emptyDiffHtml, result);
     });
+
     it('should return null if template is missing', function() {
-      var result = HoganJsUtils.render('generic', 'missing-template', {}, {noCache: true});
+      var hoganUtils = new (require('../src/hoganjs-utils.js').HoganJsUtils)({noCache: true});
+      var result = hoganUtils.render('generic', 'missing-template', {});
       assert.equal(null, result);
     });
+
+    it('should allow templates to be overridden', function() {
+      var emptyDiffTemplate = HoganJsUtils.compile('&lt;p&gt;&lt;/p&gt;');
+
+      var config = {templates: {'generic-empty-diff': emptyDiffTemplate}};
+      var hoganUtils = new (require('../src/hoganjs-utils.js').HoganJsUtils)(config);
+      var result = hoganUtils.render('generic', 'empty-diff', {myName: 'Rodrigo Fernandes'});
+      assert.equal('&lt;p&gt;Rodrigo Fernandes&lt;/p&gt;', result);
+    });
   });
 });
diff --git a/test/line-by-line-tests.js b/test/line-by-line-tests.js
index 1cd92073..8869b3df 100644
--- a/test/line-by-line-tests.js
+++ b/test/line-by-line-tests.js
@@ -14,7 +14,7 @@ describe('LineByLinePrinter', function() {
         '            File without changes\n' +
         '        &lt;/div&gt;\n' +
         '    &lt;/td&gt;\n' +
-        '&lt;/tr&gt;\n';
+        '&lt;/tr&gt;';

       assert.equal(expected, fileHtml);
     });
@@ -422,7 +422,6 @@ describe('LineByLinePrinter', function() {
         '        &lt;/div&gt;\n' +
         '    &lt;/td&gt;\n' +
         '&lt;/tr&gt;\n' +
-        '\n' +
         '                &lt;/tbody&gt;\n' +
         '            &lt;/table&gt;\n' +
         '        &lt;/div&gt;\n' +
diff --git a/test/side-by-side-printer-tests.js b/test/side-by-side-printer-tests.js
index 76625f8e..771daaa5 100644
--- a/test/side-by-side-printer-tests.js
+++ b/test/side-by-side-printer-tests.js
@@ -14,7 +14,7 @@ describe('SideBySidePrinter', function() {
         '            File without changes\n' +
         '        &lt;/div&gt;\n' +
         '    &lt;/td&gt;\n' +
-        '&lt;/tr&gt;\n';
+        '&lt;/tr&gt;';

       assert.equal(expectedRight, fileHtml.right);
       assert.equal(expectedLeft, fileHtml.left);
@@ -324,7 +324,6 @@ describe('SideBySidePrinter', function() {
         '        &lt;/div&gt;\n' +
         '    &lt;/td&gt;\n' +
         '&lt;/tr&gt;\n' +
-        '\n' +
         '                    &lt;/tbody&gt;\n' +
         '                &lt;/table&gt;\n' +
         '            &lt;/div&gt;\n' +

From f3cadb96677d0eb82fc2752dc3ffbf35ca9b5bdb Mon Sep 17 00:00:00 2001
From: Rodrigo Fernandes &lt;rtfrodrigo@gmail.com&gt;
Date: Sat, 15 Oct 2016 13:21:22 +0100
Subject: [PATCH 2/2] Allow uncompiled templates

---
 README.md                 |  3 +++
 src/hoganjs-utils.js      |  7 +++++++
 test/hogan-cache-tests.js | 24 +++++++++++++++++++++++-
 3 files changed, 33 insertions(+), 1 deletion(-)

diff --git a/README.md b/README.md
index 132c8a28..46909f25 100644
--- a/README.md
+++ b/README.md
@@ -98,6 +98,9 @@ The HTML output accepts a Javascript object with configuration. Possible options
   - `synchronisedScroll`: scroll both panes in side-by-side mode: `true` or `false`, default is `false`
   - `matchWordsThreshold`: similarity threshold for word matching, default is 0.25
   - `matchingMaxComparisons`: perform at most this much comparisons for line matching a block of changes, default is `2500`
+  - `templates`: object with previously compiled templates to replace parts of the html
+  - `rawTemplates`: object with raw not compiled templates to replace parts of the html
+  &gt; For more information regarding the possible templates look into [src/templates](https://github.com/rtfpessoa/diff2html/tree/master/src/templates)

 ## Diff2HtmlUI Helper

diff --git a/src/hoganjs-utils.js b/src/hoganjs-utils.js
index 0dda08d7..b2e9c275 100644
--- a/src/hoganjs-utils.js
+++ b/src/hoganjs-utils.js
@@ -17,6 +17,13 @@
   function HoganJsUtils(configuration) {
     this.config = configuration || {};
     extraTemplates = this.config.templates || {};
+
+    var rawTemplates = this.config.rawTemplates || {};
+    for (var templateName in rawTemplates) {
+      if (rawTemplates.hasOwnProperty(templateName)) {
+        if (!extraTemplates[templateName]) extraTemplates[templateName] = this.compile(rawTemplates[templateName]);
+      }
+    }
   }

   HoganJsUtils.prototype.render = function(namespace, view, params) {
diff --git a/test/hogan-cache-tests.js b/test/hogan-cache-tests.js
index 3bb754ac..a34839c0 100644
--- a/test/hogan-cache-tests.js
+++ b/test/hogan-cache-tests.js
@@ -36,7 +36,7 @@ describe('HoganJsUtils', function() {
       assert.equal(null, result);
     });

-    it('should allow templates to be overridden', function() {
+    it('should allow templates to be overridden with compiled templates', function() {
       var emptyDiffTemplate = HoganJsUtils.compile('&lt;p&gt;&lt;/p&gt;');

       var config = {templates: {'generic-empty-diff': emptyDiffTemplate}};
@@ -44,5 +44,27 @@ describe('HoganJsUtils', function() {
       var result = hoganUtils.render('generic', 'empty-diff', {myName: 'Rodrigo Fernandes'});
       assert.equal('&lt;p&gt;Rodrigo Fernandes&lt;/p&gt;', result);
     });
+
+    it('should allow templates to be overridden with uncompiled templates', function() {
+      var emptyDiffTemplate = '&lt;p&gt;&lt;/p&gt;';
+
+      var config = {rawTemplates: {'generic-empty-diff': emptyDiffTemplate}};
+      var hoganUtils = new (require('../src/hoganjs-utils.js').HoganJsUtils)(config);
+      var result = hoganUtils.render('generic', 'empty-diff', {myName: 'Rodrigo Fernandes'});
+      assert.equal('&lt;p&gt;Rodrigo Fernandes&lt;/p&gt;', result);
+    });
+
+    it('should allow templates to be overridden giving priority to compiled templates', function() {
+      var emptyDiffTemplate = HoganJsUtils.compile('&lt;p&gt;&lt;/p&gt;');
+      var emptyDiffTemplateUncompiled = '&lt;p&gt;Not used!&lt;/p&gt;';
+
+      var config = {
+        templates: {'generic-empty-diff': emptyDiffTemplate},
+        rawTemplates: {'generic-empty-diff': emptyDiffTemplateUncompiled}
+      };
+      var hoganUtils = new (require('../src/hoganjs-utils.js').HoganJsUtils)(config);
+      var result = hoganUtils.render('generic', 'empty-diff', {myName: 'Rodrigo Fernandes'});
+      assert.equal('&lt;p&gt;Rodrigo Fernandes&lt;/p&gt;', result);
+    });
   });
 });
</code></pre>]]></content><author><name></name></author><category term="sample-posts"/><category term="formatting"/><category term="code"/><summary type="html"><![CDATA[this is how you can display code diffs]]></summary></entry><entry><title type="html">a post with advanced image components</title><link href="https://cardinalneal.github.io/blog/2024/advanced-images/" rel="alternate" type="text/html" title="a post with advanced image components"/><published>2024-01-27T11:46:00+00:00</published><updated>2024-01-27T11:46:00+00:00</updated><id>https://cardinalneal.github.io/blog/2024/advanced-images</id><content type="html" xml:base="https://cardinalneal.github.io/blog/2024/advanced-images/"><![CDATA[<p>This is an example post with advanced image components.</p> <h2 id="image-slider">Image Slider</h2> <p>This is a simple image slider. It uses the <a href="https://swiperjs.com/">Swiper</a> library. Check the <a href="https://swiperjs.com/demos">examples page</a> for more information of what you can achieve with it.</p> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/9-480.webp 480w,/assets/img/9-800.webp 800w,/assets/img/9-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/9.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/7-480.webp 480w,/assets/img/7-800.webp 800w,/assets/img/7-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/7.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/8-480.webp 480w,/assets/img/8-800.webp 800w,/assets/img/8-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/8.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/10-480.webp 480w,/assets/img/10-800.webp 800w,/assets/img/10-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/10.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/12-480.webp 480w,/assets/img/12-800.webp 800w,/assets/img/12-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/12.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> <h2 id="image-comparison-slider">Image Comparison Slider</h2> <p>This is a simple image comparison slider. It uses the <a href="https://img-comparison-slider.sneas.io/">img-comparison-slider</a> library. Check the <a href="https://img-comparison-slider.sneas.io/examples.html">examples page</a> for more information of what you can achieve with it.</p> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/prof_pic-480.webp 480w,/assets/img/prof_pic-800.webp 800w,/assets/img/prof_pic-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/prof_pic.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/prof_pic_color-480.webp 480w,/assets/img/prof_pic_color-800.webp 800w,/assets/img/prof_pic_color-1400.webp 1400w," type="image/webp" sizes="95vw"/> <img src="/assets/img/prof_pic_color.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </img-comparison-slider>]]></content><author><name></name></author><category term="sample-posts"/><category term="formatting"/><category term="images"/><summary type="html"><![CDATA[this is what advanced image components could look like]]></summary></entry></feed>